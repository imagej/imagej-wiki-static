<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Pinpoint regressions with Git - ImageJ</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Pinpoint_regressions_with_Git","wgTitle":"Pinpoint regressions with Git","wgCurRevisionId":29392,"wgRevisionId":29392,"wgArticleId":15,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Git"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Pinpoint_regressions_with_Git","wgRelevantArticleId":15,"wgRequestId":"ff8c490eecb50c1c34bf62a5","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgPreferredVariant":"en","fancytree_path":"/extensions/TreeAndMenu/fancytree"});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user.cssprefs":"ready","user":"ready","user.options":"loading","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","skins.erudite":"ready"});mw.loader.implement("user.options@0j3lz3q",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens@1ku9xth",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup"]);});</script>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%252Cshared%257Cmediawiki.sectionAnchor%257Cskins.erudite&amp;only=styles&amp;skin=erudite.css"/>
<link rel="stylesheet" href="extensions/TreeAndMenu/fancytree/fancytree.css"/><link rel="stylesheet" href="extensions/TreeAndMenu/suckerfish/suckerfish.css"/>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=erudite.css"/>
<meta name="generator" content="MediaWiki 1.28.0"/>
<meta name="description" content="So you found a regression?  I.e. you know that the version worked perfectly that you had yesterday of, say, the ImageJ Ops library, but today it crashes?"/>
<link rel="shortcut icon" href="skins/ij2.ico"/>

<script type="text/javascript" src="extensions/SyntaxHighlighter/syntaxhighlighter/scripts/shCore.js"></script>
<script type="text/javascript" src="extensions/SyntaxHighlighter/syntaxhighlighter/scripts/shBrushBash.js"></script>
<script type="text/javascript">
SyntaxHighlighter.all();
</script>
<link rel="stylesheet" type="text/css" media="screen" href="extensions/SyntaxHighlighter/syntaxhighlighter/styles/shCoreMinit.css" />

	<meta property="og:type" content="article"/>

	<meta property="og:site_name" content="ImageJ"/>

	<meta property="og:title" content="Pinpoint regressions with Git"/>

	<meta property="og:description" content="So you found a regression?  I.e. you know that the version worked perfectly that you had yesterday of, say, the ImageJ Ops library, but today it crashes?"/>


<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Pinpoint_regressions_with_Git rootpage-Pinpoint_regressions_with_Git skin-erudite action-view">
		<div class="mw-jump">
			<a href="Git_bisection.html#bodyContent">Skip to content</a>, 			<a href="Git_bisection.html#search">Skip to search</a>
		</div>

		<div id="top-wrap" role="banner">
			<h1><a href="Welcome" title="ImageJ" rel="home">ImageJ</a></h1>
			<div id="tagline">From ImageJ</div>

			<a id="menubutton" href="Git_bisection.html#menu">Menu</a>
			<div id="nav" role="navigation">
			<ul id='menu'>
<li id="menu-item-n-About"><a href="ImageJ">About</a></li>
<li id="menu-item-n-Downloads"><a href="Downloads">Downloads</a></li>
<li id="menu-item-n-Learn"><a href="Learn">Learn</a></li>
<li id="menu-item-n-Develop"><a href="Development">Develop</a></li>
<li id="menu-item-n-News"><a href="News">News</a></li>
<li id="menu-item-n-Events"><a href="Events">Events</a></li>
<li id="menu-item-n-Help"><a href="Help">Help</a></li>
</ul>
			</div>
		</div>

		<div id="mw-js-message"></div>
		
		<div id="main" role="main">

			<div id="bodyContent">
				<h1>Pinpoint regressions with Git</h1>
				
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><table class="infobox" cellspacing="5" style="text-align: left; float: right; border: 1px solid #a0a0a0; font-size: 80%;">
<tr>
<th colspan="2" style="font-size: 130%;">  Git Tutorials
</th></tr>
<tr>
<td>
</td></tr>
<tr>
<td>  <a href="Git_for_dummies" title="Git for dummies">Git for dummies</a>
</td></tr>
<tr>
<td>  <a href="EGit" title="EGit">Git in Eclipse (EGit)</a>
<hr />
</td></tr>
<tr>
<td>  <a href="Git_mini_howto" title="Git mini howto">Git mini howto</a>
</td></tr>
<tr>
<td>  <a href="Git_workshop" title="Git workshop">Git workshop</a>
</td></tr>
<tr>
<td>  <a href="Git_Conflicts" title="Git Conflicts">Git Conflicts</a>
</td></tr>
<tr>
<td>  <a href="Git_topic_branches" title="Git topic branches">Git topic branches</a>
</td></tr>
<tr>
<td>  <a href="Git_Notes" title="Git Notes">Git Notes</a>
</td></tr>
<tr>
<td>  <a href="Git_reflogs" title="Git reflogs">Git reflogs</a>
</td></tr>
<tr>
<td>  <a href="Git_submodule_tutorial" title="Git submodule tutorial">Git submodule tutorial</a>
</td></tr>
<tr>
<td>  <strong class="selflink">Pinpoint regressions with Git</strong>
</td></tr>
<tr>
<td>  <a href="How_to_publish_a_Git_repository" title="How to publish a Git repository">How to publish a Git repository</a>
</td></tr>
<tr>
<td>  <a href="How_to_extract_a_subproject" title="How to extract a subproject">How to extract a subproject</a>
</td></tr></table>
<p><br />
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Git_bisection.html#How_to_bisect_with_Git"><span class="tocnumber">1</span> <span class="toctext">How to bisect with Git</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="Git_bisection.html#How_to_find_which_commit_introduced_a_regression"><span class="tocnumber">1.1</span> <span class="toctext">How to find which commit introduced a regression</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="Git_bisection.html#How_to_forward_port_a_fix"><span class="tocnumber">1.2</span> <span class="toctext">How to forward port a fix</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="Git_bisection.html#See_also"><span class="tocnumber">2</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h1><span class="mw-headline" id="How_to_bisect_with_Git">How to bisect with Git</span></h1>
<h2><span class="mw-headline" id="How_to_find_which_commit_introduced_a_regression">How to find which commit introduced a regression</span></h2>
<p>So you found a regression?  I.e. you know that the version worked perfectly that you had yesterday of, say, the <a href="ImageJ_Ops" title="ImageJ Ops">ImageJ Ops</a> library, but today it crashes?
</p><p>Git-bisect to the rescue!
</p>
<pre class="brush:bash">
git bisect start
git bisect bad HEAD
git bisect good HEAD@{yesterday}
</pre>
<p>This will start the bisection process, i.e. it will try to find a revision that is as much "in the middle" between the bad commit(s) and the good commit(s) (you will mark more and more commits as good or bad in the process, and by inference, the ancestors of good commits will be considered good, and the offspring of bad commits will be considered bad, too), and let you test that.
</p><p>In our case, let's just run the unit tests:
</p>
<pre class="brush:bash">
mvn clean test
</pre>
<p>If the test is undecided (e.g.: it does not compile, so you do not know if the unit test in question passes), mark it with
</p>
<pre class="brush:bash">
git bisect skip
</pre>
<p>otherwise, mark it as "bad" or "good".
</p><p>Sooner or later (usually rather sooner), Git will tell you which commit is the culprit.  You can look at the corresponding patch with
</p>
<pre class="brush:bash">
git show &lt;commit name&gt;
</pre>
<p>where the commit name is that 40-digit hex string Git told you was the first bad commit.  Usually you end the bisection process then and there:
</p>
<pre class="brush:bash">
git bisect reset
</pre>
<p>This will bring you back to the revision and branch you were on before starting the bisection.
</p>
<h2><span class="mw-headline" id="How_to_forward_port_a_fix">How to forward port a fix</span></h2>
<p>If there is an obvious flaw in the patch, just try to patch it.  You have to move to the first bad revision first:
</p>
<pre class="brush:bash">
git checkout &lt;commit name&gt;
</pre>
<p>(This will warn you that you are not on any branch, but that is okay.)  Then just apply the fix you have in mind, and commit (after making sure that it worked, of course&#160;;-).  Now, tag it with a temporary label:
</p>
<pre class="brush:bash">
git tag my-fix
</pre>
<p>and go back to the branch you came from:
</p>
<pre class="brush:bash">
git checkout master
</pre>
<p>If you are unsure which branch you came from, look at the <a href="Git_reflogs" title="Git reflogs">reflog</a> first.
</p><p>Now you can cherry-pick (or forward-port) your patch:
</p>
<pre class="brush:bash">
git cherry-pick my-fix
</pre>
<p>If there are conflicts, resolve them and commit ("git commit fiji.cxx").
</p><p>After that, you can get rid of the now-obsolete tag:
</p>
<pre class="brush:bash">
git tag -d my-fix
</pre>
<p>Note: instead of using a temporary tag, you can use the <a href="Git_reflogs" title="Git reflogs">reflog</a> of the HEAD ref (<code>git cherry-pick HEAD@{1}</code>), but if you are not familiar with the concept, tags are probably easier to handle.
</p>
<h1><span class="mw-headline" id="See_also">See also</span></h1>
<ul><li> <a rel="nofollow" class="external text" href="http://git-scm.com/book/en/v2/Git-Tools-Debugging-with-Git#Binary-Search">Binary search tutorial</a> in the Git book</li></ul>

<!-- 
NewPP limit report
Cached time: 20200713072411
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.012 seconds
Real time usage: 0.015 seconds
Preprocessor visited node count: 186/1000000
Preprocessor generated node count: 390/1000000
Postâ€expand include size: 1508/2097152 bytes
Template argument size: 691/2097152 bytes
Highest expansion depth: 5/40
Expensive parser function count: 0/3
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    5.270      1 - Template:GitMenu
100.00%    5.270      1 - -total
 80.44%    4.239      1 - Template:Menu
 46.86%    2.469     12 - Template:MenuItem
-->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="index.php?title=Pinpoint_regressions_with_Git&amp;oldid=29392">http://imagej.net/index.php?title=Pinpoint_regressions_with_Git&amp;oldid=29392</a>"</div>
							</div>

			<div id="footer">
				<p> This page was last modified on 22 March 2017, at 11:43.</p><ul><li><a href="./ImageJ:Privacy_policy" title="ImageJ:Privacy policy">Privacy policy</a></li><li><a href="./ImageJ:About" class="mw-redirect" title="ImageJ:About">About ImageJ</a></li><li><a href="Imprint" title="Imprint">Imprint</a></li></ul>			</div>

			<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="./Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="./Category:Git" title="Category:Git">Git</a></li></ul></div></div>		</div>

		<div id="bottom-wrap">
			<div id="footer-wrap-inner">
				<div id="ternary" class="footer">
					<ul>
						<li class="widget">
							<img id="logo" src="skins/imagej-128.png" alt="">
						</li>
					</ul>
				</div>
			</div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.load(["ext.fancytree","ext.suckerfish","mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.SimpleTooltip"]);});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":164});});</script>
		</body>
		</html>
		