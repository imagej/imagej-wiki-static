<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Minimum Cost Z surface Projection - ImageJ</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Minimum_Cost_Z_surface_Projection","wgTitle":"Minimum Cost Z surface Projection","wgCurRevisionId":41292,"wgRevisionId":41292,"wgArticleId":3737,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Plugins","Projection"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Minimum_Cost_Z_surface_Projection","wgRelevantArticleId":3737,"wgRequestId":"61453eafeaa79201d5e671a9","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgPreferredVariant":"en","fancytree_path":"/extensions/TreeAndMenu/fancytree"});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user.cssprefs":"ready","user":"ready","user.options":"loading","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","skins.erudite":"ready"});mw.loader.implement("user.options@0j3lz3q",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens@1ku9xth",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup"]);});</script>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%252Cshared%257Cmediawiki.sectionAnchor%257Cskins.erudite&amp;only=styles&amp;skin=erudite.css"/>
<script async="" src="load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=erudite"></script>
<link rel="stylesheet" href="extensions/TreeAndMenu/fancytree/fancytree.css"/><link rel="stylesheet" href="extensions/TreeAndMenu/suckerfish/suckerfish.css"/>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=erudite.css"/>
<meta name="generator" content="MediaWiki 1.28.0"/>
<meta name="description" content="This plugin detects minimum cost z-surface in a 3D volume. A z surface is a topographic map indicating the altitude z as a function of the position (x,y) in the image. The cost of the surface depends on pixel intensity the surface is going through. This plugin find the z-surface with the lowest intensity in an image."/>
<link rel="shortcut icon" href="skins/ij2.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="ImageJ (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="api.php?action=rsd"/>
<link rel="alternate" type="application/atom+xml" title="ImageJ Atom feed" href="index.php?title=Special:RecentChanges&amp;feed=atom"/>
	<meta property="og:type" content="article"/>

	<meta property="og:site_name" content="ImageJ"/>

	<meta property="og:title" content="Minimum Cost Z surface Projection"/>

	<meta property="og:description" content="This plugin detects minimum cost z-surface in a 3D volume. A z surface is a topographic map indicating the altitude z as a function of the position (x,y) in the image. The cost of the surface depends on pixel intensity the surface is going through. This plugin find the z-surface with the lowest intensity in an image."/>

	<meta property="og:url" content="http://imagej.net/Minimum_Cost_Z_surface_Projection"/>

<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Minimum_Cost_Z_surface_Projection rootpage-Minimum_Cost_Z_surface_Projection skin-erudite action-view">
		<div class="mw-jump">
			<a href="Minimum_Cost_Z_surface_Projection.html#bodyContent">Skip to content</a>, 			<a href="Minimum_Cost_Z_surface_Projection.html#search">Skip to search</a>
		</div>

		<div id="top-wrap" role="banner">
			<h1><a href="Welcome" title="ImageJ" rel="home">ImageJ</a></h1>
			<div id="tagline">From ImageJ</div>

			<a id="menubutton" href="Minimum_Cost_Z_surface_Projection.html#menu">Menu</a>
			<div id="nav" role="navigation">
			<ul id='menu'>
<li id="menu-item-n-About"><a href="ImageJ">About</a></li>
<li id="menu-item-n-Downloads"><a href="Downloads">Downloads</a></li>
<li id="menu-item-n-Learn"><a href="Learn">Learn</a></li>
<li id="menu-item-n-Develop"><a href="Development">Develop</a></li>
<li id="menu-item-n-News"><a href="News">News</a></li>
<li id="menu-item-n-Events"><a href="Events">Events</a></li>
<li id="menu-item-n-Help"><a href="Help">Help</a></li>
</ul>
			</div>
		</div>

		<div id="mw-js-message"></div>
		
		<div id="main" role="main">
			<div id="nav-meta">
			<span id="ca-nstab-main" class="selected"><a href="Minimum_Cost_Z_surface_Projection" title="View the content page [c]" accesskey="c">Page</a></span><span class="meta-sep">|</span><span id="ca-talk" class="new"><a href="index.php?title=Talk:Minimum_Cost_Z_surface_Projection&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page [t]" accesskey="t">Discussion</a></span><span class="meta-sep">|</span><span id="ca-viewsource"><a href="index.php?title=Minimum_Cost_Z_surface_Projection&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span><span class="meta-sep">|</span><span id="ca-history"><a href="index.php?title=Minimum_Cost_Z_surface_Projection&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></span><span class="meta-sep">|</span>			</div>

			<div id="bodyContent">
				<h1>Minimum Cost Z surface Projection</h1>
				
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Minimum_Cost_Z_surface_Projection.html#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="Minimum_Cost_Z_surface_Projection.html#Usage"><span class="tocnumber">2</span> <span class="toctext">Usage</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="Minimum_Cost_Z_surface_Projection.html#Methods_and_Implementation"><span class="tocnumber">3</span> <span class="toctext">Methods and Implementation</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="Minimum_Cost_Z_surface_Projection.html#History"><span class="tocnumber">4</span> <span class="toctext">History</span></a></li>
</ul>
</div>

<table class="infobox" cellspacing="5" style="max-width: 31em; font-size: 90%; text-align: left; float: right; border: 1px solid #a0a0a0;">
<tr>
<th colspan="2" style="text-align: center; font-size: 130%;"> <div style="float: left"></div>Min Cost Z Surface (ImageJ/Fiji)<div style="clear: left;"></div>
</th></tr>
<tr>
<th> Author
</th>
<td> <a href="User:Benoit" title="User:Benoit">Benoit Lombardot</a>
</td></tr>




<tr>
<th> Maintainer
</th>
<td> <a href="User:Benoit" title="User:Benoit">Benoit Lombardot</a>
</td></tr>

<tr>
<th> File
</th>
<td> <a href="File:MinCostZSurface_-1.1.0.jar.zip" title="File:MinCostZSurface -1.1.0.jar.zip">File:MinCostZSurface -1.1.0.jar.zip</a>
</td></tr>
<tr>
<th> Source
</th>
<td> <a rel="nofollow" class="external text" href="https://git.mpi-cbg.de/bioimage-informatics/MinCostSurface_Projection">MPI-CBG git</a>
</td></tr>
<tr>
<th> Initial release
</th>
<td> 03 August 2016
</td></tr>


<tr>
<th> Category
</th>
<td> <a href="Category:Plugins" title="Category:Plugins">Plugins</a>, <a href="index.php?title=Category:Projection&amp;action=edit&amp;redlink=1" class="new" title="Category:Projection (page does not exist)">Projection</a>
</td></tr>

</table>
<h2><span class="mw-headline" id="Introduction">Introduction</span></h2>
<p>This plugin detects minimum cost z-surface in a 3D volume. A z surface is a topographic map indicating the altitude z as a function of the position (x,y) in the image. The cost of the surface depends on pixel intensity the surface is going through. This plugin find the z-surface with the lowest intensity in an image.
</p><p>The detected surface can be used to remove signal close to the surface. For instance if the surface is occluding other objects of interest. Inversely, if one wants to visualize a surface ocluded by other object the signal far from the surface can be attenuated. Figure 1 and 2 are illustrate these use cases.
</p><p><br />
</p>
<div class="center"><div class="floatnone"><div class="MediaTransformError" style="width: 845px; height: 0px; display:inline-block;">Error creating thumbnail: Unable to save thumbnail to destination</div></div></div>
<div align="center"><b>Figure 1</b> shows the projection of a wing with and without the detection of a minimum cost z surface. The use of surface detection allows to remove signal degrading the details of the wing structure. Data credit: Andreas Sagner, Eaton lab, MPI-CBG, Dresden</div>
<p><br />
</p>
<div class="center"><div class="floatnone"><div class="MediaTransformError" style="width: 675px; height: 0px; display:inline-block;">Error creating thumbnail: Unable to save thumbnail to destination</div></div></div>
<div align="center"><b>Figure 2</b> shows how the surface of a drosophyla embryo can be virtually removed to ease the observation and analysis of internal organs. Data credit: Shradha Das, Knust Lab, MPI-CBG, Dresden</div>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<p>Both examples illustrated in the previous section can be reproduced with the Min_Cost_Surface plugin. Below is a tutorial to reproduce the example from figure 1. First of all load an image with a surface structure you would like to detect. In our example it is portion of a fly wing. the wing is not flat and can not be visualized in a single slice. Max Projection of the image give poor result in visualizing the wing in  a single plane since other structures present in the volume hide the details of the wing. The plugin allows to detect the wing surface and to select a region with a user defined thickness around it.
</p>
<ul><li> If your surface appears with high intensity value you need to duplicate it and invert it. With this manipulatiuon you should have a volume where your surface appears with low intensity. It will be used by the plugin to measure the cost of the surface. Any kind of preprocessing that can enhance the surface can be used to favor a good detection of the surface.</li></ul>
<div class="center"><div class="floatnone"><div class="MediaTransformError" style="width: 615px; height: 0px; display:inline-block;">Error creating thumbnail: Unable to save thumbnail to destination</div></div></div>
<div align="center">Input image (left) and cost image (right) for the detection of fly winf with the min cost surface plugin</div>
<p><br />
</p>
<ul><li> Start the plugin. an interface requesting parameters will open
<ul><li> <b>input image</b>: image with the surface to extract</li>
<li> <b>cost image</b>: image used to measure the cost of the surface. The surface should appear with low intensity in that image</li>
<li> <b>rescale x,y</b>: factor by which the image length and width will be divided for the processing. It serve to speed up the algorithm as well as regularizing the results in case there are holes in the surface</li>
<li> <b>rescale z</b>: factor by which the image depth will be divided for the processing.</li>
<li> <b>Max delta z between adjacent voxels</b>: This indicates the maximum variation of the z map altitude between 2 neighbor pixels (in downsampled image). if z was very large the results would be a max projection. A value of 0 would output a flat plane. A value of 1 or 2 allow to construct slowly varying surface.</li>
<li> <b>display volume(s) adjacent to the surface</b>: if checked, a volume adjacent to the surface will be outputed</li>
<li> <b>volume number of slices</b>: the total number of slice of the volume adjacent to the surface</li>
<li> <b>2 surfaces</b>: if checked 2 surfaces  will be detected in the volume (based on the single cost image inputed)</li>
<li> <b>Max distance between surfaces</b>: maximum distance in pixel between the 2 detected surfaces</li>
<li> <b>Min distance between the surfaces</b>: minimum distance in pixel between the 2 detected surfaces</li></ul></li></ul>
<p><br />
</p>
<div class="center"><div class="floatnone"><div class="MediaTransformError" style="width: 352px; height: 0px; display:inline-block;">Error creating thumbnail: Unable to save thumbnail to destination</div></div></div>
<div align="center">user interface of the plugin with the parameter used for this example</div>
<p><br />
</p>
<ul><li> the plugin will output3 images:
<ul><li> The downsampled cost image used for the calculation</li>
<li> the altitude map of the surface with minimum cost. Altitude is in pixel between 0 and the number of slice of the original image</li>
<li> A volume showing the intensity on the surface on the center slice. Other slice correspond to the intensity if the original image on tranlated version of the surface.</li></ul></li></ul>
<div class="center"><div class="floatnone"><div class="MediaTransformError" style="width: 608px; height: 0px; display:inline-block;">Error creating thumbnail: Unable to save thumbnail to destination</div></div></div>
<div align="center">Plugin output: an altitude map (left) and a volume showing intensity on the surface (right) moving the slider is equivalent to translating the surface</div>
<h2><span class="mw-headline" id="Methods_and_Implementation">Methods and Implementation</span></h2>
<p>The initial development of the plugin was initially proposed by Dagmar Kainmueller (Myers lab MPI-CBG, Dresden ). The plugin was implemented after the method of Li et al. [1]. One can refer to that paper for the principle of the surface detection. The mincut maxflow problem is solved using the GraphCut solver implemented in FIJI <a rel="nofollow" class="external text" href="https://fiji.sc/Graph_Cut">Graph_Cut plugin by Jan Funke</a>.
</p><p>Also If the plugin allows to detect only two surface with one input function, the underlying class has more flexibility and can handle any number of surface and cost function. It also allow to add crossing or non crossing constraints on any pair of surfaces as described in Li et al.
</p><p>[1] Li, K., Wu, X., Chen, D. Z., &amp; Sonka, M. (2006).<a rel="nofollow" class="external text" href="http://www.ncbi.nlm.nih.gov/pmc/articles/PMC2646122/">Optimal surface segmentation in volumetric images, a graph-theoretic approach</a>. Pattern Analysis and Machine Intelligence, IEEE Transactions on, 28(1), 119-134.
</p><p><br />
</p>
<h2><span class="mw-headline" id="History">History</span></h2>
<p><b>2016-08-03&#160;: version 1.1.0</b>
</p><p><b>2017-11-30&#160;: update to version 1.1.3</b>
</p>
<ul><li> 2 ops were added to the package to call 1 and 2 surface projection from script and 1 for image reslice.</li>
<li> the reslicing from script uses linear interpolation.</li>
<li> from script, a new relative surface weight can be used to support surface detection</li></ul>

<!-- 
NewPP limit report
Cached time: 20200713073009
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.036 seconds
Real time usage: 0.040 seconds
Preprocessor visited node count: 89/1000000
Preprocessor generated node count: 553/1000000
Postâ€expand include size: 1001/2097152 bytes
Template argument size: 529/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/3
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    3.760      1 - Template:Infobox
100.00%    3.760      1 - -total
-->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="index.php?title=Minimum_Cost_Z_surface_Projection&amp;oldid=41292">http://imagej.net/index.php?title=Minimum_Cost_Z_surface_Projection&amp;oldid=41292</a>"</div>
							</div>

			<div id="footer">
				<p> This page was last modified on 24 January 2020, at 11:55.</p><ul><li><a href="ImageJ:Privacy_policy" title="ImageJ:Privacy policy">Privacy policy</a></li><li><a href="ImageJ:About" class="mw-redirect" title="ImageJ:About">About ImageJ</a></li><li><a href="Imprint" title="Imprint">Imprint</a></li><li><a href="index.php?title=Minimum_Cost_Z_surface_Projection&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li></ul>			</div>

			<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="Category:Plugins" title="Category:Plugins">Plugins</a></li><li><a href="index.php?title=Category:Projection&amp;action=edit&amp;redlink=1" class="new" title="Category:Projection (page does not exist)">Projection</a></li></ul></div></div>		</div>

		<div id="bottom-wrap">
		<div id="footer-wrap-inner">

		<div id="primary" class="footer">
			<ul>

			<li id="search" class="widget">
				<h3>Search</h3>
				<form action="http://imagej.net/index.php" id="searchform">
					<input type='hidden' name="title" value="Special:Search" />
					<div>
						<input name="search" placeholder="Search ImageJ" title="Search ImageJ [f]" accesskey="f" id="s"/>						<input type="submit" name="go" value="Search" title="Go to a page with this exact name if it exists" class="searchButton" id="searchsubmit"/>					</div>
				</form>
			</li>

			
						<li class="widget">
				<h3>Personal tools</h3>
				<div>
					<ul>
					<li id="pt-createaccount"><a href="index.php?title=Special:CreateAccount&amp;returnto=Minimum+Cost+Z+surface+Projection" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li><li id="pt-login"><a href="index.php?title=Special:UserLogin&amp;returnto=Minimum+Cost+Z+surface+Projection" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>					</ul>
				</div>
			</li>
			
			<li class="widget">
							</li>

			</ul>
		</div>

		<div id="secondary" class="footer">
			<ul>

			<li id="toolbox" class="widget">
				<h3>Tools</h3>
				<ul>
				<li id="t-whatlinkshere"><a href="Special:WhatLinksHere/Minimum_Cost_Z_surface_Projection" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="Special:RecentChangesLinked/Minimum_Cost_Z_surface_Projection" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="index.php?title=Minimum_Cost_Z_surface_Projection&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="index.php?title=Minimum_Cost_Z_surface_Projection&amp;oldid=41292" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="index.php?title=Minimum_Cost_Z_surface_Projection&amp;action=info" title="More information about this page">Page information</a></li>				</ul>
			</li>

			
			<li class="widget">
							</li>

			</ul>
		</div>

		<div id="ternary" class="footer">
			<ul>

			<li class="widget">
				<img id="logo" src="skins/imagej-128.png" alt=""/>			</li>

			<li class="widget">
				<h3><span class="mw-headline" id="MORE_TOOLS">MORE TOOLS</span></h3>
<ul><li> <a href="Special:ChangeUploadPassword" title="Special:ChangeUploadPassword">Set/change upload password</a></li>
<li> <a href="Special:RecentChanges" title="Special:RecentChanges">Recent changes</a></li>
<li> <a href="Special:LonelyPages" title="Special:LonelyPages">Orphaned pages</a></li></ul>
			</li>

			</ul>
		</div>
		<div style="clear: both"></div>

		</div>
		</div>

		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.load(["ext.fancytree","ext.suckerfish","mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.SimpleTooltip"]);});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":231});});</script>
		</body>
		</html>
		