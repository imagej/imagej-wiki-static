<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>SPIM Bead Registration (deprecated) - ImageJ</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"SPIM_Bead_Registration_(deprecated)","wgTitle":"SPIM Bead Registration (deprecated)","wgCurRevisionId":41322,"wgRevisionId":41322,"wgArticleId":1408,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Plugins","Registration"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"SPIM_Bead_Registration_(deprecated)","wgRelevantArticleId":1408,"wgRequestId":"32f55de4817275a9995e6514","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgPreferredVariant":"en","fancytree_path":"/extensions/TreeAndMenu/fancytree"});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user.cssprefs":"ready","user":"ready","user.options":"loading","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","skins.erudite":"ready"});mw.loader.implement("user.options@0j3lz3q",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens@1ku9xth",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup"]);});</script>
<link rel="stylesheet" href="../load.php%3Fdebug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%252Cshared%257Cmediawiki.sectionAnchor%257Cskins.erudite&amp;only=styles&amp;skin=erudite.css"/>
<script async="" src="../load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=erudite"></script>
<link rel="stylesheet" href="../extensions/TreeAndMenu/fancytree/fancytree.css"/><link rel="stylesheet" href="../extensions/TreeAndMenu/suckerfish/suckerfish.css"/>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="../load.php%3Fdebug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=erudite.css"/>
<meta name="generator" content="MediaWiki 1.28.0"/>
<meta name="description" content="Please Note: This version of the software is outdated. It will be part of Fiji for the time being, but I highly recommend using the new Multiview Reconstruction Plugin. It is much more powerful, flexible and completely integrated with the BigDataViewer."/>
<link rel="shortcut icon" href="../skins/ij2.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="http://imagej.net/opensearch_desc.php" title="ImageJ (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="http://imagej.net/api.php?action=rsd"/>
<link rel="alternate" type="application/atom+xml" title="ImageJ Atom feed" href="http://imagej.net/index.php?title=Special:RecentChanges&amp;feed=atom"/>

<script type="text/javascript" src="../extensions/SyntaxHighlighter/syntaxhighlighter/scripts/shCore.js"></script>
<script type="text/javascript" src="../extensions/SyntaxHighlighter/syntaxhighlighter/scripts/shBrushPlain.js"></script>
<script type="text/javascript">
SyntaxHighlighter.all();
</script>
<link rel="stylesheet" type="text/css" media="screen" href="../extensions/SyntaxHighlighter/syntaxhighlighter/styles/shCoreMinit.css" />

	<meta property="og:type" content="article"/>

	<meta property="og:site_name" content="ImageJ"/>

	<meta property="og:title" content="SPIM Bead Registration (deprecated)"/>

	<meta property="og:description" content="Please Note: This version of the software is outdated. It will be part of Fiji for the time being, but I highly recommend using the new Multiview Reconstruction Plugin. It is much more powerful, flexible and completely integrated with the BigDataViewer."/>

	<meta property="og:url" content="http://imagej.net/SPIM_Bead_Registration_(deprecated)"/>

<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-SPIM_Bead_Registration_deprecated rootpage-SPIM_Bead_Registration_deprecated skin-erudite action-view">
		<div class="mw-jump">
			<a href="SPIM_Bead_Registration_(deprecated).html#bodyContent">Skip to content</a>, 			<a href="SPIM_Bead_Registration_(deprecated).html#search">Skip to search</a>
		</div>

		<div id="top-wrap" role="banner">
			<h1><a href="http://imagej.net/Welcome" title="ImageJ" rel="home">ImageJ</a></h1>
			<div id="tagline">From ImageJ</div>

			<a id="menubutton" href="SPIM_Bead_Registration_(deprecated).html#menu">Menu</a>
			<div id="nav" role="navigation">
			<ul id='menu'>
<li id="menu-item-n-About"><a href="http://imagej.net/ImageJ">About</a></li>
<li id="menu-item-n-Downloads"><a href="http://imagej.net/Downloads">Downloads</a></li>
<li id="menu-item-n-Learn"><a href="http://imagej.net/Learn">Learn</a></li>
<li id="menu-item-n-Develop"><a href="http://imagej.net/Development">Develop</a></li>
<li id="menu-item-n-News"><a href="http://imagej.net/News">News</a></li>
<li id="menu-item-n-Events"><a href="http://imagej.net/Events">Events</a></li>
<li id="menu-item-n-Help"><a href="http://imagej.net/Help">Help</a></li>
</ul>
			</div>
		</div>

		<div id="mw-js-message"></div>
		
		<div id="main" role="main">
			<div id="nav-meta">
			<span id="ca-nstab-main" class="selected"><a href="http://imagej.net/SPIM_Bead_Registration_(deprecated)" title="View the content page [c]" accesskey="c">Page</a></span><span class="meta-sep">|</span><span id="ca-talk" class="new"><a href="http://imagej.net/index.php?title=Talk:SPIM_Bead_Registration_(deprecated)&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page [t]" accesskey="t">Discussion</a></span><span class="meta-sep">|</span><span id="ca-viewsource"><a href="http://imagej.net/index.php?title=SPIM_Bead_Registration_(deprecated)&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span><span class="meta-sep">|</span><span id="ca-history"><a href="http://imagej.net/index.php?title=SPIM_Bead_Registration_(deprecated)&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></span><span class="meta-sep">|</span>			</div>

			<div id="bodyContent">
				<h1>SPIM Bead Registration (deprecated)</h1>
				
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><table class="infobox" cellspacing="5" style="max-width: 31em; font-size: 90%; text-align: left; float: right; border: 1px solid #a0a0a0;">
<tr>
<th colspan="2" style="text-align: center; font-size: 130%;"> <div style="float: left"></div>Selective Plane Illumination Microscopy Registration (ImageJ)<div style="clear: left;"></div>
</th></tr>
<tr>
<th> Author
</th>
<td> Stephan Preibisch, Stephan Saalfeld, Johannes Schindelin, Pavel Tomancak
</td></tr>




<tr>
<th> Maintainer
</th>
<td> Stephan Preibisch
</td></tr>

<tr>
<th> File
</th>
<td> SPIM_Registration.jar
</td></tr>

<tr>
<th> Initial release
</th>
<td> February 2010
</td></tr>
<tr>
<th> Latest version
</th>
<td> September 2011
</td></tr>

<tr>
<th> Category
</th>
<td> <a href="http://imagej.net/Category:Registration" title="Category:Registration">SPIM Registration</a>
</td></tr>
<tr>
<th> Website
</th>
<td> <a rel="nofollow" class="external text" href="http://fly.mpi-cbg.de/~preibisch">Stephan Preibisch's homepage</a>
</td></tr>
</table>
<p><br />
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="SPIM_Bead_Registration_(deprecated).html#Important_Note"><span class="tocnumber">1</span> <span class="toctext">Important Note</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="SPIM_Bead_Registration_(deprecated).html#Citation"><span class="tocnumber">2</span> <span class="toctext">Citation</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="SPIM_Bead_Registration_(deprecated).html#Overview_of_the_deprecated_SPIM_bead-based_registration_plugin"><span class="tocnumber">3</span> <span class="toctext">Overview of the <i><b>deprecated</b></i> SPIM bead-based registration plugin</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="SPIM_Bead_Registration_(deprecated).html#Creating_a_cropped_output_image"><span class="tocnumber">3.1</span> <span class="toctext">Creating a cropped output image</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="SPIM_Bead_Registration_(deprecated).html#Downloading_example_dataset"><span class="tocnumber">3.2</span> <span class="toctext">Downloading example dataset</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="SPIM_Bead_Registration_(deprecated).html#System_requirements"><span class="tocnumber">3.3</span> <span class="toctext">System requirements</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="SPIM_Bead_Registration_(deprecated).html#Using_the_Plugins"><span class="tocnumber">3.4</span> <span class="toctext">Using the Plugins</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="SPIM_Bead_Registration_(deprecated).html#Processing_a_Time_Lapse_Acqusition"><span class="tocnumber">3.5</span> <span class="toctext">Processing a Time Lapse Acqusition</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="SPIM_Bead_Registration_(deprecated).html#deprecated_SPIM_bead-based_registration"><span class="tocnumber">4</span> <span class="toctext"><i><b>deprecated</b></i> SPIM bead-based registration</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="SPIM_Bead_Registration_(deprecated).html#Plugin_Wishlist"><span class="tocnumber">5</span> <span class="toctext">Plugin Wishlist</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="SPIM_Bead_Registration_(deprecated).html#Multi-Channel_SPIM_Registration"><span class="tocnumber">6</span> <span class="toctext">Multi-Channel SPIM Registration</span></a></li>
<li class="toclevel-1 tocsection-12"><a href="SPIM_Bead_Registration_(deprecated).html#Advanced_SPIM_Registration"><span class="tocnumber">7</span> <span class="toctext">Advanced SPIM Registration</span></a>
<ul>
<li class="toclevel-2 tocsection-13"><a href="SPIM_Bead_Registration_(deprecated).html#configuration.txt"><span class="tocnumber">7.1</span> <span class="toctext">configuration.txt</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="SPIM_Bead_Registration_(deprecated).html#VariablesAssignment.txt"><span class="tocnumber">7.2</span> <span class="toctext">VariablesAssignment.txt</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Important_Note">Important Note</span></h2>
<p><span style="color:#A52A2A">
<i><b>Please Note: This version of the software is outdated. It will be part of Fiji for the time being, but I highly recommend using the new <a href="http://imagej.net/Multiview-Reconstruction" title="Multiview-Reconstruction">Multiview Reconstruction Plugin</a>. It is much more powerful, flexible and completely integrated with the <a href="http://imagej.net/BigDataViewer" title="BigDataViewer">BigDataViewer</a>.</b></i>
</span>
</p>
<h2><span class="mw-headline" id="Citation">Citation</span></h2>
<p>Please note that the SPIM registration plugin available through Fiji, is based on a publication. If you use it successfully for your research please be so kind to cite our work:
</p>
<ul><li> S. Preibisch, S. Saalfeld, J. Schindelin and P. Tomancak (2010) "Software for bead-based registration of selective plane illumination microscopy data", <i>Nature Methods</i>, <b>7</b>(6):418-419. <a rel="nofollow" class="external text" href="http://www.nature.com/nmeth/journal/v7/n6/full/nmeth0610-418.html">Webpage</a> <a href="http://imagej.net/_images/2/29/Nmeth0610-418.pdf" class="internal" title="Nmeth0610-418.pdf">PDF</a> <a href="http://imagej.net/_images/3/32/Nmeth0610-418-S1.pdf" class="internal" title="Nmeth0610-418-S1.pdf">Supplement</a></li></ul>
<p>For technical details about the bead-based registration method and SPIM imaging see <a href="http://imagej.net/SPIM_Registration_Method" title="SPIM Registration Method">SPIM Registration Method</a>.
</p>
<h2><span class="mw-headline" id="Overview_of_the_deprecated_SPIM_bead-based_registration_plugin">Overview of the <i><b>deprecated</b></i> SPIM bead-based registration plugin</span></h2>
<p>The SPIM Registration plugin reconstructs an image from several input images, called views. For this reconstruction process some parameters defining the input and output data are required. The user has to define the naming convention of the input images, an approximate bead-brightness as well as the strategies for creating the fused output image. 
</p>
<h3><span class="mw-headline" id="Creating_a_cropped_output_image">Creating a cropped output image</span></h3>
<p>As the output images are typically very big (bounding box around all registered views) it is strongly recommended to define a cropping area where the imaged sample is positioned in the output image. As this is not possible in the first run, there is an option to first create a down-sampled version of the output image from which one can extract the cropping area. By running the plugin again and loading the previous registration parameters the cropped full-resolution output image can be created efficiently.
</p>
<h3><span class="mw-headline" id="Downloading_example_dataset">Downloading example dataset</span></h3>
<p>There is a 7-angle SPIM dataset of <i>Drosophila</i> available <a rel="nofollow" class="external text" href="http://fly.mpi-cbg.de/preibisch/nm/HisYFP-SPIM.zip">here</a>. The cropping parameters pre-set in the plugin fit this dataset, only the appropriate folder has to be defined.
</p>
<h3><span class="mw-headline" id="System_requirements">System requirements</span></h3>
<p>Multi-view SPIM datasets are typically rather large, therefore it is recommended to use the registration plugin on a computer with a lot of RAM. The minimal requirement for the example dataset is <b>at least 4Gb</b> of memory however we recommend an <b>8Gb</b> system. You may need to increase the Fiji memory limit by going to Edit-&gt;Options-&gt;Memory &amp; Threads.
</p>
<h3><span class="mw-headline" id="Using_the_Plugins">Using the Plugins</span></h3>
<p>There are three plugins which take those input parameters in different formats:
</p>
<ul><li> <b><a href="http://imagej.net/SPIM_Registration#SPIM_Registration" title="SPIM Registration"> SPIM Registration</a></b>: Allows the registration of SPIM data with a subset of necessary options presented in the graphical user interface</li>
<li> <b><a href="http://imagej.net/SPIM_Registration#Multi-Channel_SPIM_Registration" title="SPIM Registration"> Multi-Channel SPIM Registration</a></b>: Extends the <a href="http://imagej.net/SPIM_Registration#SPIM_Registration" title="SPIM Registration"> SPIM Registration</a> to multiple channels and allows to override the z-stretching saved in the input files.</li>
<li> <b><a href="http://imagej.net/SPIM_Registration#Advanced_SPIM_Registration" title="SPIM Registration"> Advanced SPIM Registration</a></b>: Registration of SPIM data using all possible options via loading a configuration file</li></ul>
<h3><span class="mw-headline" id="Processing_a_Time_Lapse_Acqusition">Processing a Time Lapse Acqusition</span></h3>
<p>Processing a time lapse acquisition requires two steps. In the first step the registration for each individual timepoint has to be computed and will be automatically stored. Therefore, in the first pass, input the timepoints that should be processed in <b>Time Points to process</b> (e.g. 1-100), check <b>Register only (no fusion)</b> and uncheck <b>Timelapse processing</b>. After the registration is performed one timepoint has to be selected as reference timepoint, typically one with a low registration error. This timepoint should be fused to determine the <b><a href="http://imagej.net/SPIM_Registration#Creating_a_cropped_output_image" title="SPIM Registration"> correct cropping area </a></b> which will afterwards be applied to all other timepoints. 
</p><p>After all individual timepoints are registered and the cropping area is defined the plugin has to be called again. This time check <b>Timelapse Registration</b>, insert the <b>Reference Timepoint</b>, uncheck <b>Register only (no fusion)</b> and insert the coordinates of the cropping area of the reference timepoint. The created output images can be viewed for example with Plugins-&gt;Image5D-&gt;Virtual Image 5D Opener <a rel="nofollow" class="external autonumber" href="https://imagej.net/plugins/image5d.html">[1]</a>.
</p>
<h2><span class="mw-headline" id="deprecated_SPIM_bead-based_registration"><i><b>deprecated</b></i> SPIM bead-based registration</span></h2>
<div class="thumb tright"><div class="thumbinner" style="width:218px;"><a href="http://imagej.net/File:SPIM_Registration.png" class="image"><img alt="" src="../_images/d/de/SPIM_Registration.png" width="216" height="403" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="http://imagej.net/File:SPIM_Registration.png" class="internal" title="Enlarge"></a></div>Shows the SPIM Registration Dialog.</div></div></div>
<ul><li> <b>SPIM Data Directory</b>: Fill in the directory name that contains all the image files. You can either drag&amp;drop the directory, browse for it or type the name directly.</li></ul>
<ul><li> <b>Time Points to process</b>: Define the timepoint(s) that should be processed. You can give single numbers (e.g. 18), enumerate (e.g. 1, 18, 19, 100), define ranges (e.g. 1-18) or combine all of them in any combination wanted (e.g. 1,2,10,20-50).</li></ul>
<ul><li> <b>Pattern of SPIM files</b>: Define the naming convention of the input files by explaining how the angle and the timepoint is encoded into the filename. For example the file names are named in following way <br /><i>spim_tl1_angle0.lsm</i>, <i>spim_tl1_angle45.lsm</i> ... <i>spim_tl1_angle270.lsm</i><br /><i>spim_tl2_angle0.lsm</i>, ... <i>spim_tl2_angle270.lsm</i><br /><i>spim_tl100_angle0.lsm</i>, ... <i>spim_tl100_angle270.lsm</i>.<br /> That means the pattern of the file names corresponds to <b>spim_tl{t}_angle{a}.lsm</b>, where <b>{t}</b> is replaced with the current timepoint and <b>{a}</b> with the current angle. If the numbers contain leading zeros (e.g. 000, 045, 090, 135 instead of 0, 45, 90, 135), this can be encoded by simply adding more letters to the placeholder, in this case <b>{aaa}</b>.</li></ul>
<ul><li> <b>Angles to process</b>: Define the angles (at least 2) that should be processed (for each timepoint if applicable). You can enumerate angles (e.g. 0, 90, 180, 270), define ranges in steps (e.g. 0-270:45 which means use angle 0 to 270 in steps of 45, i.e. 0, 45, 90, 135, 180, 225, 270) or combine all of them in any combination wanted (e.g. 0, 45, 180-270:45).</li></ul>
<ul><li> <b>Timelapse processing</b>: Checked if a timelapse processing should be performed. In this case the <b>pre-registered</b> timepoints are re-registered to one reference timepoint which results in an aligned time series.</li></ul>
<ul><li> <b>Reference Timepoint</b>: Define the reference timepoint for timelapse processing if timelapse processing above is checked.</li></ul>
<ul><li> <b>Load segmented beads</b>: If the registration of the time point is carried out more than once (to recompute the registration) the initial segmentation of the beads can be loaded to speed up processing. Note: if <b>Load registration</b> is checked, <b>Load segmented beads</b> is implicitly checked as well.</li></ul>
<ul><li> <b>Bead Brightness</b>: Define the brightness of the used beads relative to the sample.</li></ul>
<ul><li> <b>Load Registration</b>: If the registration of the time point is carried out more than once (either to define the correct cropping area or to perform timelapse processing) the initial segmentation of the beads and the final affine matrices of the views can be loaded to speed up processing. Note: if <b>Load registration</b> is checked, <b>Load segmented beads</b> is implicitly checked as well and <b>Display registration</b> will be ignored.</li></ul>
<ul><li> <b>Register only (no fusion)</b>: Checked if no fusion of the data should be performed.</li></ul>
<ul><li> <b>Display registration</b>: This will display an interactive window visualizing the global optimization process. <b>Note:</b> This slows down the optimization.</li></ul>
<ul><li> <b>Fusion Method</b>: There are three options available. <br /> <i>Fuse all images at once</i> loads all the input images and computes the output image. This is the fastest method but it also needs significant amouts of RAM. <br /> <i>Fuse images sequentially</i> loads one input image after the other and computes the contribution sequentially. This is significantly slower but typically uses less RAM. However, this methods needs to allocate the output image twice during the fusion process as it needs to store image content and weights separatetly. <br /> <i>Create independent registered images</i> is a special output option where each view is transformed into a compatible bounding box and written as a separate file for further processing.</li></ul>
<ul><li> <b>Fusion use Blending</b>: Checked if blending at the edges of the overlapping views should be applied; this removes brightness differences at the hyperplanes where the overlapping images intersect. <b>Note:</b> If neither Blending nor Content based Weightening is selected, only averaging is performed for fusion.</li></ul>
<ul><li> <b>Fusion use Content based Weightening</b>: Checked if the content-based weightening should be used; this weights each pixel of each view by its local information content and thereby increases the contrast of the output image. <b>Note:</b> The content based weightening is rather fast but consumes a lot of RAM. If neither Blending nor Content based Weightening is selected, only averaging is performed for fusion.</li></ul>
<ul><li> <b>Output Image Scaling</b>: The factor defines the downsampling of the output image, e.g. 2 means that the output image will be half as big in each dimension and therefore need 8x less RAM than the full resolution output image. This is especially useful if the bounding box around the imaged sample (defined below) is not known yet as has to be determined.</li></ul>
<ul><li> <b>Crop Offset Output Image X/Y/Z</b>: Defines the cropping offset in the x/y/z-dimension of the output image relative to the uncropped image. A value of 0 means no cropping. <b>Note:</b> All the values are relative to the downsampling factor in <b>Output Image Scaling</b>.</li>
<li> <b>Crop Size Output Image X/Y/Z</b>: Defines the cropped size in the x/y/z-dimension of the output image relative to the uncropped image. A value of 0 means no cropping. <b>Note:</b> All the values are relative to the downsampling factor in <b>Output Image Scaling</b>.</li></ul>
<h2><span class="mw-headline" id="Plugin_Wishlist">Plugin Wishlist</span></h2>
<p>When you find some features that you would like to be added to the plugin, please write them down here
</p>
<ul><li> Change Z-Stretching in Plugin</li>
<li> Automatic Timelapse processing</li>
<li> Preview (e.g. Max Projections of first angle) if register only checked and more than one timepoint</li></ul>
<h2><span class="mw-headline" id="Multi-Channel_SPIM_Registration">Multi-Channel SPIM Registration</span></h2>
<p>The multi-channel SPIM Registration extends the normal registration by the ability to register multiple channels and to override the resolution (xy, z) stored in the files. Therefore two new options are available
</p>
<ul><li> <b>Channels to process</b>: Define the channel(s) to process. You can give single numbers (e.g. 0), enumerate (e.g. 1, 2), define ranges (e.g. 1-3) or combine all of them in any combination wanted (e.g. 1,3-4).</li></ul>
<ul><li> <b>Override file dimensions</b>: Check this box to override the axial and lateral resolution stored in the input files.</li></ul>
<ul><li> <b>xy resolution (um/px)</b>: Define the xy-resolution in um per pixel, note that only the ratio between xy and z-resolution is used.</li></ul>
<ul><li> <b>z resolution (um/px)</b>: Define the z-resolution in um per pixel, note that only the ratio between xy and z-resolution is used.</li></ul>
<h2><span class="mw-headline" id="Advanced_SPIM_Registration">Advanced SPIM Registration</span></h2>
<div class="thumb tright"><div class="thumbinner" style="width:361px;"><a href="http://imagej.net/File:Advanced_SPIM_Registration.png" class="image"><img alt="" src="../_images/b/b1/Advanced_SPIM_Registration.png" width="359" height="101" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="http://imagej.net/File:Advanced_SPIM_Registration.png" class="internal" title="Enlarge"></a></div>Shows the Advanced SPIM Registration Dialog.</div></div></div><br />
<p>For advanced SPIM registration all available parameters can be tuned using two configuration files (configuration.txt and VariablesAssignment.txt, see below). Contact the author for further details <a rel="nofollow" class="external autonumber" href="http://fly.mpi-cbg.de/preibisch/contact.html">[2]</a>. 
</p>
<h3><span class="mw-headline" id="configuration.txt">configuration.txt</span></h3>
<pre class="brush:text">
### Configuration file for SPIM Registration
### ----------------------------------------
###
### The first line is the filename for the linkage from the entries in this file to the
### variable names in java. It is very important and you only need to change this
### if you change the source code.
###
### The rest of the file is divided into sections where you can change different
### types of parameters. Really important is the Input files section. Change it
### according to your experiment data.

&lt;VariablesAssignment.txt&gt;

###
### Section: General Parameters
###

Time Point Pattern = "18"
Acquisition Angle Pattern = "0-270:45"
# The input files can be in any format that Fiji can read.
# They need to be 3D stacks with correct calibration, though.
Input File Pattern = "spim_TL{t}_Angle{a}.lsm"
Input Directory = "F:\Stephan\dros\"
Output Directory = "F:\Stephan\dros\output"
Registration File Directory = "F:\Stephan\dros\registration\"
Debug Level = "DEBUG_MAIN"
Show ImageJ Window = true

###
### Section: Time Lapse 
###

Time Lapse Registration = false
Reference Time Point = 1

###
### Section: Data Structures, Access and Paging
###

Factory for Images during Segmentation = ArrayContainerFactory()
Factory for Recursive Gauss = ArrayContainerFactory()
Factory for Images during Fusion = ArrayContainerFactory()
#Factory for Output Images = ArrayContainerFactory()
Factory for Entropy = ArrayContainerFactory()
Factory for Scale Space = ArrayContainerFactory()

#Factory for Images during Segmentation = CubeContainerFactory(16)
#Factory for Recursive Gauss = CubeContainerFactory(16)
#Factory for Images during Fusion = CubeContainerFactory(16)
Factory for Output Images = CubeContainerFactory( 256 )
#Factory for Entropy = CubeContainerFactory(16)
#Factory for Scale Space = CubeContainerFactory(35)

Paging Temporary Directory = null

Out of Bounds Strategy for Fusion = OutsideStrategyValueFactory(0)
Out of Bounds Strategy for Gauss = OutsideStrategyMirrorFactory()
Interpolator for Output Image = LinearInterpolatorFactory()

###
### Section: Main Switches
###

Write Output Image = true
Show Output Image = true
Segmentation Use Scale Space = true
Fusion Use Entropy = false
Fusion Use Gauss = false
Fusion Use Blending = false

Fuse all Images at once = false
Fuse Images sequentially = false
Number of Paralell Views = 4
Create multiple registered Output Images = true    

Register Only = false
Display Registration = false
Read Segmentation = true
Write Segmentation = true
Read Registration = false
Write Registration = true

###
### Section: Image Parameters
###

Override Z-Stretching of Image = true

# 20x, 2um z spacing ( 2.0 / 0.73 )
Image Z-Stretching = 2.739726027397260273972602739726

Image Background = 0

###
### Section: Threshold Bead Segmentation
###

Bead Segmentation Threshold = 0.9
Bead Segmentation Fixed Threshold = 0.02
Bead Segmentation Use Fixed Threshold = true 
Bead Segmentation Circularity Factor = 0.5
Bead Segmentation Minimum Black Border around Bead = 1
Bead Segmentation Minimum Bead Size = 10
Bead Segmentation Maximum Bead Size = 13375
Bead Segmentation Use Center of Mass = false

###
### Section: Scale Space Bead Segmentation
###

Bead Scale Space Minimum Peak Value = 0.01
Bead Scale Space Minimum Initial Peak Value = 0.005
Bead Scale Space Identity Radius = 3.0
Bead Scale Space Maxima Tolerance = 0.01
Bead Scale Space Image Sigma = 0.5
Bead Scale Space Initial Sigma = 1.4
Bead Scale Space Steps per Octave = 4
Bead Scale Space Steps = 3
Bead Scale Space Number of Threads = 0

###
### Section: Point Descriptor and Global Optimization
###

Point Descriptor Difference Threshold = 50
Point Descriptor Ratio of Distance = 10
Point Descriptor Number of Neighbors = 3
Point Descriptor Use Associated Beads = false   
Point Descriptor Use RANSAC = true

RANSAC Maximum Epsilon = 5
RANSAC Minimum Inlier Ratio = 0.1  
RANSAC Number of Iterations = 1000

# p__ = ( 1 - r^n ) ^ k
# k = log(p__) / log ( 1 - r^n )

# p__ ... probability that ransac fails
# r   ... min inlier ratio
# n   ... minimal number of points needed to create model
# k   ... number of iterations 

###
### Section: Output Image
###

Output Image Scale = 1

Output Image Crop Offset X = 0
Output Image Crop Offset Y = 0
Output Image Crop Offset Z = 0
Output Image Crop Size X = 0
Output Image Crop Size Y = 0
Output Image Crop Size Z = 0


Output Image Number of Threads = 0

###
### Section: Volume Injection
###

Volume Injection Sigma = 0.25
Volume Injection Cut Off Radius = 2

###
### Section: Entropy
###

Entropy Histogram Bins = 256
Entropy Window Size X = 25
Entropy Window Size Y = 25

###
### Section: Blending
###

Blending Alpha = 1.5

###
### Section: Gauss Fusion
###

Gauss Fusion Sigma 1 = 20
Gauss Fusion Sigma 2 = 40
</pre>
<h3><span class="mw-headline" id="VariablesAssignment.txt">VariablesAssignment.txt</span></h3>
<pre class="brush:text">
Input File Pattern = String inputFilePattern
Time Point Pattern = String timepointPattern 
Acquisition Angle Pattern = String anglePattern
Input Directory = String inputdirectory 
Output Directory = String outputdirectory
Registration File Directory = String registrationFiledirectory
Debug Level = String debugLevel
Show ImageJ Window = boolean showImageJWindow

Time Lapse Registration = boolean timeLapseRegistration
Reference Time Point = int referenceTimePoint

Factory for Images during Segmentation = ContainerFactory imageFactory
Factory for Recursive Gauss = ContainerFactory recursiveGaussFactory
Factory for Images during Fusion = ContainerFactory imageFactoryFusion
Factory for Output Images = ContainerFactory outputImageFactory
Factory for Entropy = ContainerFactory entropyFactory
Factory for Scale Space = ContainerFactory scaleSpaceFactory

Paging Temporary Directory = String tempDir

Out of Bounds Strategy for Fusion = OutsideStrategyFactory strategyFactoryOutput	
Out of Bounds Strategy for Gauss = OutsideStrategyFactory strategyFactoryGauss
Interpolator for Output Image = InterpolatorFactory interpolatorFactorOutput

Write Output Image = boolean writeOutputImage
Show Output Image = boolean showOutputImage
Segmentation Use Scale Space = boolean useScaleSpace
Fusion Use Entropy = boolean useEntropy
Fusion Use Gauss = boolean useGauss
Fusion Use Blending = boolean useLinearBlening

Fuse all Images at once = boolean paralellFusion    
Fuse Images sequentially = boolean sequentialFusion
Number of Paralell Views = int numParalellViews  
Create multiple registered Output Images = boolean multipleImageFusion    

Register Only = boolean registerOnly
Display Registration = boolean displayRegistration
Read Segmentation = boolean readSegmentation
Write Segmentation =  boolean writeSegmentation
Read Registration = boolean readRegistration
Write Registration = boolean writeRegistration   

Override Z-Stretching of Image = boolean overrideImageZStretching
Image Z-Stretching = double zStretching
Image Background = int background
	
Bead Segmentation Threshold = float threshold
Bead Segmentation Fixed Threshold = float fixedThreshold
Bead Segmentation Use Fixed Threshold = boolean useFixedThreshold 
Bead Segmentation Circularity Factor = double circularityFactor
Bead Segmentation Minimum Black Border around Bead = int minBlackBorder
Bead Segmentation Minimum Bead Size = int minSize
Bead Segmentation Maximum Bead Size = int maxSize
Bead Segmentation Use Center of Mass = boolean useCenterOfMass

Bead Scale Space Minimum Peak Value = float minPeakValue
Bead Scale Space Minimum Initial Peak Value = float minInitialPeakValue
Bead Scale Space Identity Radius = float identityRadius
Bead Scale Space Maxima Tolerance = float maximaTolerance
Bead Scale Space Image Sigma = float imageSigma
Bead Scale Space Initial Sigma = float initialSigma
Bead Scale Space Steps per Octave = int stepsPerOctave
Bead Scale Space Steps = int steps
Bead Scale Space Number of Threads = int scaleSpaceNumberOfThreads

Point Descriptor Difference Threshold = double differenceThreshold
Point Descriptor Ratio of Distance = double ratioOfDistance
Point Descriptor Number of Neighbors = int neighbors
Point Descriptor Use Associated Beads = boolean useAssociatedBeads    
Point Descriptor Use RANSAC = boolean useRANSAC

RANSAC Maximum Epsilon = float max_epsilon
RANSAC Minimum Inlier Ratio = float min_inlier_ratio   
RANSAC Number of Iterations = int numIterations

Output Image Scale = int scale
Output Image Crop Offset X = int cropOffsetX
Output Image Crop Offset Y = int cropOffsetY
Output Image Crop Offset Z = int cropOffsetZ
Output Image Crop Size X = int cropSizeX
Output Image Crop Size Y = int cropSizeY
Output Image Crop Size Z = int cropSizeZ
Output Image Number of Threads = int numberOfThreads

Volume Injection Sigma = float sigma
Volume Injection Cut Off Radius = int cutOffRadiusGauss

Entropy Histogram Bins = int histogramBins
Entropy Window Size X = int windowSizeX
Entropy Window Size Y = int windowSizeY

Blending Alpha = float alpha

Gauss Fusion Sigma 1 = float fusionSigma1
Gauss Fusion Sigma 2 = float fusionSigma2
</pre>

<!-- 
NewPP limit report
Cached time: 20200713073300
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.052 seconds
Real time usage: 0.054 seconds
Preprocessor visited node count: 142/1000000
Preprocessor generated node count: 637/1000000
Postâ€expand include size: 1050/2097152 bytes
Template argument size: 529/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/3
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    5.692      1 - Template:Infobox
100.00%    5.692      1 - -total
-->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="http://imagej.net/index.php?title=SPIM_Bead_Registration_(deprecated)&amp;oldid=41322">http://imagej.net/index.php?title=SPIM_Bead_Registration_(deprecated)&amp;oldid=41322</a>"</div>
							</div>

			<div id="footer">
				<p> This page was last modified on 24 January 2020, at 11:55.</p><ul><li><a href="http://imagej.net/ImageJ:Privacy_policy" title="ImageJ:Privacy policy">Privacy policy</a></li><li><a href="http://imagej.net/ImageJ:About" class="mw-redirect" title="ImageJ:About">About ImageJ</a></li><li><a href="http://imagej.net/Imprint" title="Imprint">Imprint</a></li><li><a href="http://imagej.net/index.php?title=SPIM_Bead_Registration_(deprecated)&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li></ul>			</div>

			<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="http://imagej.net/Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="http://imagej.net/Category:Plugins" title="Category:Plugins">Plugins</a></li><li><a href="http://imagej.net/Category:Registration" title="Category:Registration">Registration</a></li></ul></div></div>		</div>

		<div id="bottom-wrap">
		<div id="footer-wrap-inner">

		<div id="primary" class="footer">
			<ul>

			<li id="search" class="widget">
				<h3>Search</h3>
				<form action="http://imagej.net/index.php" id="searchform">
					<input type='hidden' name="title" value="Special:Search" />
					<div>
						<input name="search" placeholder="Search ImageJ" title="Search ImageJ [f]" accesskey="f" id="s"/>						<input type="submit" name="go" value="Search" title="Go to a page with this exact name if it exists" class="searchButton" id="searchsubmit"/>					</div>
				</form>
			</li>

			
						<li class="widget">
				<h3>Personal tools</h3>
				<div>
					<ul>
					<li id="pt-createaccount"><a href="http://imagej.net/index.php?title=Special:CreateAccount&amp;returnto=SPIM+Bead+Registration+%28deprecated%29" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li><li id="pt-login"><a href="http://imagej.net/index.php?title=Special:UserLogin&amp;returnto=SPIM+Bead+Registration+%28deprecated%29" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>					</ul>
				</div>
			</li>
			
			<li class="widget">
							</li>

			</ul>
		</div>

		<div id="secondary" class="footer">
			<ul>

			<li id="toolbox" class="widget">
				<h3>Tools</h3>
				<ul>
				<li id="t-whatlinkshere"><a href="http://imagej.net/Special:WhatLinksHere/SPIM_Bead_Registration_(deprecated)" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="http://imagej.net/Special:RecentChangesLinked/SPIM_Bead_Registration_(deprecated)" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="http://imagej.net/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="http://imagej.net/index.php?title=SPIM_Bead_Registration_(deprecated)&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="http://imagej.net/index.php?title=SPIM_Bead_Registration_(deprecated)&amp;oldid=41322" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="http://imagej.net/index.php?title=SPIM_Bead_Registration_(deprecated)&amp;action=info" title="More information about this page">Page information</a></li>				</ul>
			</li>

			
			<li class="widget">
							</li>

			</ul>
		</div>

		<div id="ternary" class="footer">
			<ul>

			<li class="widget">
				<img id="logo" src="../skins/imagej-128.png" alt=""/>			</li>

			<li class="widget">
				<h3><span class="mw-headline" id="MORE_TOOLS">MORE TOOLS</span></h3>
<ul><li> <a href="http://imagej.net/Special:ChangeUploadPassword" title="Special:ChangeUploadPassword">Set/change upload password</a></li>
<li> <a href="http://imagej.net/Special:RecentChanges" title="Special:RecentChanges">Recent changes</a></li>
<li> <a href="http://imagej.net/Special:LonelyPages" title="Special:LonelyPages">Orphaned pages</a></li></ul>
			</li>

			</ul>
		</div>
		<div style="clear: both"></div>

		</div>
		</div>

		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.load(["ext.fancytree","ext.suckerfish","mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.SimpleTooltip"]);});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":254});});</script>
		</body>
		</html>
		