<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Parallel Iterative Deconvolution - ImageJ</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Parallel_Iterative_Deconvolution","wgTitle":"Parallel Iterative Deconvolution","wgCurRevisionId":17032,"wgRevisionId":17032,"wgArticleId":92,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Plugins","Deconvolution"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Parallel_Iterative_Deconvolution","wgRelevantArticleId":92,"wgRequestId":"483e23f639945005737dd291","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgPreferredVariant":"en","fancytree_path":"/extensions/TreeAndMenu/fancytree"});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user.cssprefs":"ready","user":"ready","user.options":"loading","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","skins.erudite":"ready"});mw.loader.implement("user.options@0j3lz3q",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens@1ku9xth",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup"]);});</script>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%252Cshared%257Cmediawiki.sectionAnchor%257Cskins.erudite&amp;only=styles&amp;skin=erudite.css"/>
<script async="" src="load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=erudite"></script>
<link rel="stylesheet" href="extensions/TreeAndMenu/fancytree/fancytree.css"/><link rel="stylesheet" href="extensions/TreeAndMenu/suckerfish/suckerfish.css"/>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=erudite.css"/>
<meta name="generator" content="MediaWiki 1.28.0"/>
<meta name="description" content="Parallel Iterative Deconvolution is an ImageJ plugin for iterative deblurring. This plugin takes advantage of multi-core processors."/>
<link rel="shortcut icon" href="skins/ij2.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="ImageJ (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="api.php?action=rsd"/>
<link rel="alternate" type="application/atom+xml" title="ImageJ Atom feed" href="index.php?title=Special:RecentChanges&amp;feed=atom"/>
	<meta property="og:type" content="article"/>

	<meta property="og:site_name" content="ImageJ"/>

	<meta property="og:title" content="Parallel Iterative Deconvolution"/>

	<meta property="og:description" content="Parallel Iterative Deconvolution is an ImageJ plugin for iterative deblurring. This plugin takes advantage of multi-core processors."/>


<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Parallel_Iterative_Deconvolution rootpage-Parallel_Iterative_Deconvolution skin-erudite action-view">
		<div class="mw-jump">
			<a href="Parallel_Iterative_Deconvolution.html#bodyContent">Skip to content</a>, 			<a href="Parallel_Iterative_Deconvolution.html#search">Skip to search</a>
		</div>

		<div id="top-wrap" role="banner">
			<h1><a href="Welcome" title="ImageJ" rel="home">ImageJ</a></h1>
			<div id="tagline">From ImageJ</div>

			<a id="menubutton" href="Parallel_Iterative_Deconvolution.html#menu">Menu</a>
			<div id="nav" role="navigation">
			<ul id='menu'>
<li id="menu-item-n-About"><a href="ImageJ">About</a></li>
<li id="menu-item-n-Downloads"><a href="Downloads">Downloads</a></li>
<li id="menu-item-n-Learn"><a href="Learn">Learn</a></li>
<li id="menu-item-n-Develop"><a href="Development">Develop</a></li>
<li id="menu-item-n-News"><a href="News">News</a></li>
<li id="menu-item-n-Events"><a href="Events">Events</a></li>
<li id="menu-item-n-Help"><a href="Help">Help</a></li>
</ul>
			</div>
		</div>

		<div id="mw-js-message"></div>
		
		<div id="main" role="main">
			<div id="nav-meta">
			<span id="ca-nstab-main" class="selected"><a href="Parallel_Iterative_Deconvolution" title="View the content page [c]" accesskey="c">Page</a></span><span class="meta-sep">|</span><span id="ca-talk" class="new"><a href="index.php?title=Talk:Parallel_Iterative_Deconvolution&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page [t]" accesskey="t">Discussion</a></span><span class="meta-sep">|</span><span id="ca-viewsource"><a href="index.php?title=Parallel_Iterative_Deconvolution&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span><span class="meta-sep">|</span><span id="ca-history"><a href="index.php?title=Parallel_Iterative_Deconvolution&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></span><span class="meta-sep">|</span>			</div>

			<div id="bodyContent">
				<h1>Parallel Iterative Deconvolution</h1>
				
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><table class="infobox" cellspacing="5" style="max-width: 31em; font-size: 90%; text-align: left; float: right; border: 1px solid #a0a0a0;">
<tr>
<th colspan="2" style="text-align: center; font-size: 130%;"> <div style="float: left"></div>Parallel Iterative Deconvolution 2D and 3D (ImageJ)<div style="clear: left;"></div>
</th></tr>
<tr>
<th> Author
</th>
<td> Piotr Wendykier
</td></tr>




<tr>
<th> Maintainer
</th>
<td> None
</td></tr>

<tr>
<th> File
</th>
<td> <a rel="nofollow" class="external text" href="http://sourceforge.net/project/downloading.php?group_id=260515&amp;filename=parallel_iterative_deconvolution-1.9-bin.zip">parallel_iterative_deconvolution-1.9-bin.zip</a>
</td></tr>
<tr>
<th> Source
</th>
<td> <a rel="nofollow" class="external text" href="http://sourceforge.net/project/downloading.php?group_id=260515&amp;filename=parallel_iterative_deconvolution-1.9-src.zip">parallel_iterative_deconvolution-1.9-src.zip</a>
</td></tr>
<tr>
<th> Initial release
</th>
<td> 30 January 2008
</td></tr>
<tr>
<th> Latest version
</th>
<td> 11 April 2009
</td></tr>
<tr>
<th> Development status
</th>
<td> active
</td></tr>
<tr>
<th> Category
</th>
<td> <a href="Category:Deconvolution" title="Category:Deconvolution">Deconvolution</a>
</td></tr>
<tr>
<th> Website
</th>
<td> <a rel="nofollow" class="external autonumber" href="http://sites.google.com/site/piotrwendykier/software/deconvolution/paralleliterativedeconvolution">[1]</a>
</td></tr>
</table>
<p><br />
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Parallel_Iterative_Deconvolution.html#Purpose"><span class="tocnumber">1</span> <span class="toctext">Purpose</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="Parallel_Iterative_Deconvolution.html#Documentation"><span class="tocnumber">2</span> <span class="toctext">Documentation</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="Parallel_Iterative_Deconvolution.html#Introduction"><span class="tocnumber">3</span> <span class="toctext">Introduction</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="Parallel_Iterative_Deconvolution.html#What_is_Deconvolution.3F"><span class="tocnumber">3.1</span> <span class="toctext">What is Deconvolution?</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="Parallel_Iterative_Deconvolution.html#What_is_Parallel_Iterative_Deconvolution.3F"><span class="tocnumber">3.2</span> <span class="toctext">What is Parallel Iterative Deconvolution?</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="Parallel_Iterative_Deconvolution.html#How_to_use"><span class="tocnumber">4</span> <span class="toctext">How to use</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="Parallel_Iterative_Deconvolution.html#MRNSD_Options"><span class="tocnumber">4.1</span> <span class="toctext">MRNSD Options</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="Parallel_Iterative_Deconvolution.html#WPL_Options"><span class="tocnumber">4.2</span> <span class="toctext">WPL Options</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="Parallel_Iterative_Deconvolution.html#CGLS_Options"><span class="tocnumber">4.3</span> <span class="toctext">CGLS Options</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="Parallel_Iterative_Deconvolution.html#HyBR_Options"><span class="tocnumber">4.4</span> <span class="toctext">HyBR Options</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="Parallel_Iterative_Deconvolution.html#Spatially_Variant_PSF"><span class="tocnumber">4.5</span> <span class="toctext">Spatially Variant PSF</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="Parallel_Iterative_Deconvolution.html#How_to_Obtain_a_Theoretical_PSF.3F"><span class="tocnumber">4.6</span> <span class="toctext">How to Obtain a Theoretical PSF?</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-13"><a href="Parallel_Iterative_Deconvolution.html#2D_Spatially_Invariant_Example"><span class="tocnumber">5</span> <span class="toctext">2D Spatially Invariant Example</span></a></li>
<li class="toclevel-1 tocsection-14"><a href="Parallel_Iterative_Deconvolution.html#2D_Spatially_Variant_Example"><span class="tocnumber">6</span> <span class="toctext">2D Spatially Variant Example</span></a></li>
<li class="toclevel-1 tocsection-15"><a href="Parallel_Iterative_Deconvolution.html#3D_Spatially_Invariant_Example"><span class="tocnumber">7</span> <span class="toctext">3D Spatially Invariant Example</span></a></li>
<li class="toclevel-1 tocsection-16"><a href="Parallel_Iterative_Deconvolution.html#See_also"><span class="tocnumber">8</span> <span class="toctext">See also</span></a></li>
<li class="toclevel-1 tocsection-17"><a href="Parallel_Iterative_Deconvolution.html#Version_history"><span class="tocnumber">9</span> <span class="toctext">Version history</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Purpose">Purpose</span></h2>
<p>Parallel Iterative Deconvolution is an ImageJ plugin for iterative deblurring. This plugin takes advantage of multi-core processors. 
</p>
<h2><span class="mw-headline" id="Documentation">Documentation</span></h2>
<p>The plugin code is based on a <a href="MATLAB" class="mw-redirect" title="MATLAB">MATLAB</a> toolbox: <a rel="nofollow" class="external text" href="http://mathcs.emory.edu/%7Enagy/RestoreTools/index.html">RestoreTools</a> by James G. Nagy and several of his students, including Julianne Chung, Katrina Palmer, Lisa Perrone, and Ryan Wright and also on <a href="Iterative_Deconvolve_3D" title="Iterative Deconvolve 3D">Iterative Deconvolve 3D</a> by Robert Dougherty.
</p><p>It implements the 4 following iterative methods:
</p>
<ul><li> MRNSD - Modified Residual Norm Steepest Descent</li>
<li> WPL - Wiener Filter Preconditioned Landweber</li>
<li> CGLS - Conjugate Gradient for Least Squares</li>
<li> HyBR - Hybrid Bidiagonalization Regularization</li></ul>
<p>Please refer to the <a rel="nofollow" class="external text" href="http://sites.google.com/site/piotrwendykier/software/deconvolution/paralleliterativedeconvolution">website</a> for details and examples.
</p>
<h2><span class="mw-headline" id="Introduction">Introduction</span></h2>
<h3><span class="mw-headline" id="What_is_Deconvolution.3F">What is Deconvolution?</span></h3>
<p>In applications such as astronomy, medicine, physics and biology, scientists use digital images to record and analyze
results from experiments. Environmental effects and imperfections in the imaging system can cause the recorded
images to be degraded by blurring and noise. Image deconvolution (sometimes known as image deblurring) is the
process of reconstructing or estimating the true image from the degraded one. Image deblurring algorithms can be
classified into two classes: spectral filtering methods and iterative methods. Other classification divides the algorithms into methods that do not require any information about the blur (also called blind deconvolution) and the methods that need that information. The information about the blur is usually given in the form of a point spread function (PSF). A PSF is an image that describes the response of an imaging system to a point object. A theoretical PSF can be obtained based on the optical properties of the imaging system. The main advantage of this approach is that the obtained PSF is noise-free. The experimental technique, on the other hand, relies on taking a picture of a point object, for example a distant star. In this work we assume that the PSF is known and given in the form of an image.
</p>
<h3><span class="mw-headline" id="What_is_Parallel_Iterative_Deconvolution.3F">What is Parallel Iterative Deconvolution?</span></h3>
<p>With iterative deconvolution methods, a sequence of approximations is constructed, where hopefully subsequent approximations provide better reconstructions. Mathematically this is equivalent to solving a particular optimization problem involving a PSF and a blurred image, which could be formulated as something simple like a least squares problem, or something more complicated that incorporates (possibly nonlinear) constraints. As with spectral filtering methods, regularization must be incorporated using, for example, a priori constraints, or through appropriate convergence criteria, or even a combination of such techniques. Well known examples of iterative image reconstruction algorithms include expectation maximization (EM) type approaches (such as the Richardson-Lucy algorithm), conjugate gradient (CG) type methods, and many others. One important advantage of using iterative algorithms is that they can be used on a much wider class of blurring models, including spatially variant blurs. Although iterative methods are generally more expensive than spectral filtering methods for simple spatially invariant blurs, they are much more efficient for difficult spatially variant blurs. Moreover, it is possible to incorporate constraints (e.g., nonnegativity) in the algorithms. The challenges in iterative algorithms concern the regularization (how to stabilize the iterative method in the presence of noise), and determination of an appropriate stopping iteration. 
</p><p>Parallel Iterative Deconvolution is an ImageJ plugin for iterative image deblurring. The code is derived from <a rel="nofollow" class="external text" href="http://mathcs.emory.edu/%7Enagy/RestoreTools/index.html">RestoreTools</a>: An Object Oriented <a href="MATLAB" class="mw-redirect" title="MATLAB">MATLAB</a> Package for Image Restoration written by James G. Nagy and several of his students, including Julianne Chung, Katrina Palmer, Lisa Perrone, and Ryan Wright and also from <a href="Iterative_Deconvolve_3D" title="Iterative Deconvolve 3D">Iterative Deconvolve 3D</a> written by Robert Dougherty. The current version implements four iterative algorithms: Modified Residual Norm Steepest Descent <a rel="nofollow" class="external text" href="ftp://ftp.mathcs.emory.edu/pub/nagy/papers/NagStr00.ps.gz">(MRNSD)</a>, Wiener Filter Preconditioned Landweber <a rel="nofollow" class="external text" href="http://www.optinav.com/Iterative-Deconvolve-3D.htm">(WPL)</a>, Conjugate Gradient for Least Squares <a rel="nofollow" class="external text" href="http://www.mai.liu.se/%7Eakbjo/LSPbook.html">(CGLS)</a> and Hybrid Bidiagonalization Regularization <a rel="nofollow" class="external text" href="http://www.mathcs.emory.edu/%7Enagy/WGCV/">(HyBR)</a>. Although the plugin can handle arbitrary-sized 2- and 3-dimensional images, its usage is limited to grayscale images. To deconvolve a color image, you would have to split the channels and deblur each channel separately.
</p>
<h2><span class="mw-headline" id="How_to_use">How to use</span></h2>
<div class="center"><div class="floatnone"><a href="File:ParallelIterativeDeconvolutionDialog.jpg" class="image"><img alt="ParallelIterativeDeconvolutionDialog.jpg" src="_images/7/76/ParallelIterativeDeconvolutionDialog.jpg" width="500" height="498" /></a></div></div>
<p>There are eight drop-down lists (combo-boxes) available in the GUI. From the Blurred image list, you can choose a blurred image. PSF list is for selection of a point spread function image. The content of these two lists depends on what is currently open in ImageJ - if no image windows are displayed then both lists are empty. The next two lists (Method and Preconditioner) allow you to select an algorithm used for deconvolution (MRNSD, WPL, CGLS, HyBR) and a preconditioner. The preconditioner is used for speeding up the convergence (so that you will get a better reconstruction after fewer iterations). Currently only the fast Fourier transform-based preconditioner is available (WPL uses the Wiener Filter as a preconditioner). The tolerance for the preconditioner is computed automatically by default (Auto check-box), but it is also possible to specify the value manually. In the Boundary combo-box you can choose from three types of boundary conditions: Reflexive, Periodic and Zero. The first ones are usually the best choice. The Resizing combo-box allows you to specify how the blurred image will be padded before processing. The Minimal resizing means that the pixel data in each dimension of a blurred image are padded by the size of the corresponding dimension of a PSF image. If the Next power of two option is selected, then the pixel data in each dimension of a blurred image are padded to the next power-of-two size that is greater or equal to the size of an image obtained by minimal padding. Finally, the Auto option chooses between the two other options to maximize the performance. The Output list is used to specify the type of an output (reconstructed image) and in the Precision combo-box you can choose a floating-point precision used in computations. Practice shows that a single precision is sufficient for most problems. 
</p><p>There are few other important options in the GUI that require some explanation. The Max number of iterations text field is used to specify how many iterations a given method should perform. It is a maximal value, which means that the process of reconstruction may stop earlier (when the stopping criterion is met). When the Show iterations check-box is selected, then the reconstructed image will be displayed after each iteration. Finally, in the Max number of threads (power of 2) text field you can enter how many computational threads will be used. By default this value is equal to the number of CPUs available on your machine. 
</p><p>The Options button (next to the Method combo-box) is used to display a dialog window with advanced preferences for each algorithm. All of these options are described in the following subsections.
</p>
<h3><span class="mw-headline" id="MRNSD_Options">MRNSD Options</span></h3>
<div class="center"><div class="floatnone"><a href="File:MRNSDOptions.jpg" class="image"><img alt="MRNSDOptions.jpg" src="_images/7/7e/MRNSDOptions.jpg" width="250" height="167" /></a></div></div>
<p>MRNSD has only three advanced properties. The Stopping tolerance text field allows you to manually specify the value that will be used as a stopping criterion. By default that value is computed automatically. When the Threshold option is enabled, then all values in the reconstructed image that are less than the value specified in the threshold text field are replaced by zero. However, since MRNSD is a nonnegatively constrained algorithm, this option is not very useful and is disabled by default. Finally, selecting Log convergence effects in displaying the record of the convergence in a separate Log window.
</p>
<h3><span class="mw-headline" id="WPL_Options">WPL Options</span></h3>
<div class="center"><div class="floatnone"><a href="File:WPLOptions.jpg" class="image"><img alt="WPLOptions.jpg" src="_images/3/3c/WPLOptions.jpg" width="500" height="360" /></a></div></div>
<p>WPL, similarly to MRNSD, is a nonnegatively constrained algorithm, therefore the Threshold option is also disabled by default. Moreover, the Log mean pixel value to track convergence has the same functionality as in the case of MRNSD - the record of the convergence is displayed in the separate Log window. If Normalize PSF is selected then the point spread function is normalized before processing. To reduce artifacts from features near the boundary of the imaging volume you should use the Perform anti-ringing step option. The Detect divergence property stops the iteration if the changes appear to be increasing. You may try to increase the low pass filter size if this problem occurs. For WPL, the inputs in decibels are permitted (Data (image, psf and result) in dB). This is uncommon in optical image processing, but is the norm in acoustics. The Wiener filter gamma is a tolerance for the preconditioner. It is intended to speed up the convergence, but can produce spurious artifacts. Setting this parameter to zero turns off the preconditioner (Wiener Filter). The Low pass filter x and y settings, in pixels, provide a way to smooth the results and accelerate convergence. Choose 0 to disable this function. Finally, the Terminate iteration if mean delta less than x% is used as a stopping criterion. 
</p>
<h3><span class="mw-headline" id="CGLS_Options">CGLS Options</span></h3>
<div class="center"><div class="floatnone"><a href="File:CGLSOptions.jpg" class="image"><img alt="CGLSOptions.jpg" src="_images/6/6a/CGLSOptions.jpg" width="250" height="167" /></a></div></div>
<p>CGLS options panel looks exactly the same as the MRNSD options panel. The only difference is that the Threshold option is enabled by default, since it is not a nonnegativity constrained method. 
</p>
<h3><span class="mw-headline" id="HyBR_Options">HyBR Options</span></h3>
<div class="center"><div class="floatnone"><a href="File:HYBROptions.jpg" class="image"><img alt="HYBROptions.jpg" src="_images/0/08/HYBROptions.jpg" width="350" height="377" /></a></div></div>
<p>To understand all the details about advanced properties of HyBR you should first read <a rel="nofollow" class="external text" href="ftp://ftp.mathcs.emory.edu/pub/techreport/TR-2007-004-A.pdf">this</a> paper. In the HyBR options panel the properties relevant to regularization are grouped in the box called Regularization options. The Method combo-box allows you to decide how the regularization parameter will be computed. If you select None, then the value of the parameter has to entered in the Parameter text field. When WGCV (Weighted Generalized Cross-Validation) is chosen then you have to specify the weight (Omega) manually. In the Begin regularization after this iteration text field you can decide after which iteration the regularization will begin. Before that iteration the QR factorization is used to solve the least squares problem.
</p><p>Besides regularization properties, you can adjust five other options. In the Inner solver combo-box you can choose the solver that will be used at each iteration. Currently it can be either Tikhonov or None. If None is selected as an inner solver, then the QR factorization is used to solve the least squares problem. In the Stopping tolerance text field you can enter a value that will be used to detect flatness in the GCV curve as a stopping criteria. If Reorthogonalize Lanczos subspaces is selected, then during the process of Lanczos bidiagonalization, the subspaces will be reorthogonalized. Usually this is not required, so by default this option is unused. The Threshold check-box should be selected, because HyBR does not compute a nonnegative solution. The Log Convergence has the same functionality as for all other methods. 
</p>
<h3><span class="mw-headline" id="Spatially_Variant_PSF">Spatially Variant PSF</span></h3>
<div class="center"><div class="floatnone"><a href="File:CreateSpatiallyVariantPSFDialog.jpg" class="image"><img alt="CreateSpatiallyVariantPSFDialog.jpg" src="_images/f/fc/CreateSpatiallyVariantPSFDialog.jpg" width="400" height="119" /></a></div></div>
<p><br />
</p>
<div class="center"><div class="floatnone"><a href="File:EditSpatiallyVariantPSFDialog.jpg" class="image"><img alt="EditSpatiallyVariantPSFDialog.jpg" src="_images/0/06/EditSpatiallyVariantPSFDialog.jpg" width="350" height="200" /></a></div></div>
<p>There are three elements in the GUI that have not been described above, namely: Spatially variant PSF check-box, Define and Edit buttons. These controls allow you to work with spatially variant PSFs (i.e. if you have multiple PSF images associated with a single blurred image). Fig. In the Create Spatially Variant PSF panel you can specify the number of PSFs in the form of 2D (or 3D) matrix. Then, after clicking OK button, the Edit Spatially Variant PSF panel will appear. This dialog contains a grid of buttons that you can use to enter paths to the PSF files. 
</p><p><br />
</p>
<h3><span class="mw-headline" id="How_to_Obtain_a_Theoretical_PSF.3F">How to Obtain a Theoretical PSF?</span></h3>
<p>There are several ImageJ plugins for generating a theoretical point spread function:
</p>
<ul><li> <a rel="nofollow" class="external text" href="http://www.mosaic.ethz.ch/Downloads/psftool">PSF Tool for ImageJ</a> by the ETH Computationnal Biophysics Lab</li>
<li> <a href="Diffraction_PSF_3D" title="Diffraction PSF 3D">Diffraction PSF 3D</a> by Robert Dougherty</li>
<li> <a rel="nofollow" class="external text" href="http://bigwww.epfl.ch/demo/deconvolution3D/">Deconvolution3D</a> by Pierre Besson.</li></ul>
<p>To use these tools you need to know some parameters of your microscope setup and sample like NA, RI of mounting
medium, wavelength, etc.
</p>
<h2><span class="mw-headline" id="2D_Spatially_Invariant_Example">2D Spatially Invariant Example</span></h2>
<p>After opening the image to deconvolve and the image of the PSF, start <span><em><span style="border-bottom:1px dotted #ccc;"> Plugins </span>&#160;&#8250; <span style="border-bottom:1px dotted #ccc;"> Deconvolution </span>&#160;&#8250; <span style="border-bottom:1px dotted #ccc;"> 2D Iterative Deconvolution...</span></em></span>
</p>
<div class="center"><div class="floatnone"><a href="File:ParallelIterativeDeconvolution2DSpatiallyInvariantExample.jpg" class="image"><img alt="ParallelIterativeDeconvolution2DSpatiallyInvariantExample.jpg" src="_images/f/f2/ParallelIterativeDeconvolution2DSpatiallyInvariantExample.jpg" width="800" height="416" /></a></div></div>
<p>Clicking on the Deconvolve button results in this:
</p>
<div class="center"><div class="floatnone"><a href="File:ParallelIterativeDeconvolution2DSpatiallyInvariantExampleResult.jpg" class="image"><img alt="ParallelIterativeDeconvolution2DSpatiallyInvariantExampleResult.jpg" src="_images/3/39/ParallelIterativeDeconvolution2DSpatiallyInvariantExampleResult.jpg" width="800" height="463" /></a></div></div>
<p><br />
</p>
<h2><span class="mw-headline" id="2D_Spatially_Variant_Example">2D Spatially Variant Example</span></h2>
<p>After opening the image to deconvolve, start <span><em><span style="border-bottom:1px dotted #ccc;"> Plugins </span>&#160;&#8250; <span style="border-bottom:1px dotted #ccc;"> Deconvolution </span>&#160;&#8250; <span style="border-bottom:1px dotted #ccc;"> 2D Iterative Deconvolution...</span></em></span>, select Spatially variant PSF check-box and click on the Define button 
</p>
<div class="center"><div class="floatnone"><a href="File:ParallelIterativeDeconvolution2DSpatiallyVariantExample1.jpg" class="image"><img alt="ParallelIterativeDeconvolution2DSpatiallyVariantExample1.jpg" src="_images/e/e5/ParallelIterativeDeconvolution2DSpatiallyVariantExample1.jpg" width="800" height="526" /></a></div></div>
<p>Enter 5 x 5 and click OK button in the Create Spatially Variant PSF panel, then in the Edit Spatially Variant PSF panel you have to define all 25 PSFs
</p>
<div class="center"><div class="floatnone"><a href="File:ParallelIterativeDeconvolution2DSpatiallyVariantExample2.jpg" class="image"><img alt="ParallelIterativeDeconvolution2DSpatiallyVariantExample2.jpg" src="_images/6/67/ParallelIterativeDeconvolution2DSpatiallyVariantExample2.jpg" width="800" height="470" /></a></div></div>
<p>Enter 40 in the Max number of iterations text field and click on the Deconvolve button. You have to adjust the color balance of both images (<span><em><span style="border-bottom:1px dotted #ccc;"> Image </span>&#160;&#8250; <span style="border-bottom:1px dotted #ccc;"> Adjust </span>&#160;&#8250; <span style="border-bottom:1px dotted #ccc;"> Color Balance...</span></em></span>&gt;Auto from Fiji menu).  
</p>
<div class="center"><div class="floatnone"><a href="File:ParallelIterativeDeconvolution2DSpatiallyVariantExample3.jpg" class="image"><img alt="ParallelIterativeDeconvolution2DSpatiallyVariantExample3.jpg" src="_images/4/49/ParallelIterativeDeconvolution2DSpatiallyVariantExample3.jpg" width="800" height="629" /></a></div></div>
<p><br />
</p>
<h2><span class="mw-headline" id="3D_Spatially_Invariant_Example">3D Spatially Invariant Example</span></h2>
<p>After opening the image to deconvolve and the image of the PSF, start <span><em><span style="border-bottom:1px dotted #ccc;"> Plugins </span>&#160;&#8250; <span style="border-bottom:1px dotted #ccc;"> Deconvolution </span>&#160;&#8250; <span style="border-bottom:1px dotted #ccc;"> 3D Iterative Deconvolution...</span></em></span>
</p>
<div class="center"><div class="floatnone"><a href="File:ParallelIterativeDeconvolution3DSpatiallyInvariantExample1.jpg" class="image"><img alt="ParallelIterativeDeconvolution3DSpatiallyInvariantExample1.jpg" src="_images/5/5d/ParallelIterativeDeconvolution3DSpatiallyInvariantExample1.jpg" width="800" height="477" /></a></div></div>
<p>Choose WPL method, click on the Options button and set all the properties as shown below
</p>
<div class="center"><div class="floatnone"><a href="File:ParallelIterativeDeconvolution3DSpatiallyInvariantExample2.jpg" class="image"><img alt="ParallelIterativeDeconvolution3DSpatiallyInvariantExample2.jpg" src="_images/d/d9/ParallelIterativeDeconvolution3DSpatiallyInvariantExample2.jpg" width="800" height="575" /></a></div></div>
<p>Enter 20 in the Max number of iterations text field and click on the Deconvolve button
</p>
<div class="center"><div class="floatnone"><a href="File:ParallelIterativeDeconvolution3DSpatiallyInvariantExample3.jpg" class="image"><img alt="ParallelIterativeDeconvolution3DSpatiallyInvariantExample3.jpg" src="_images/8/82/ParallelIterativeDeconvolution3DSpatiallyInvariantExample3.jpg" width="800" height="507" /></a></div></div>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul><li> <a href="Parallel_Spectral_Deconvolution" title="Parallel Spectral Deconvolution">Parallel Spectral Deconvolution</a> by the same author, for another set of methods.</li></ul>
<h2><span class="mw-headline" id="Version_history">Version history</span></h2>
<ul><li> 1.0:	January 30, 2008
<ul><li> Initial release.</li></ul></li></ul>
<ul><li> 1.1:	February 5, 2008
<ul><li> Fixed bug in PSFMatrix_2D causing IndexOutOfBoundException.</li>
<li> Added Benchmark_2D.</li></ul></li></ul>
<ul><li> 1.2:	February 15, 2008
<ul><li> Added single precision.</li>
<li> Added 3D algorithms.</li>
<li> Added exceptions handling.</li></ul></li></ul>
<ul><li> 1.2.1:	February 16, 2008
<ul><li> Fixed bug causing IllegalArgumentException in vectorize().</li></ul></li></ul>
<ul><li> 1.2.2:	February 19, 2008
<ul><li>  Fixed bug causing IllegalArgumentException in getFft3().</li></ul></li></ul>
<ul><li> 1.3:	February 24, 2008
<ul><li> The overlap-save algorithm for invariant multiplication was replaced by the non-blocking version in PSFMatrix_2D and PSFMatrix_3D.</li>
<li> Fixed bug in MRNSD (division by zero).</li></ul></li></ul>
<ul><li> 1.4:	March 4. 2008
<ul><li> Added threshold option. </li>
<li> Added options panel for MRNSD and CGLS.</li>
<li> Changed the title of a deblurred image.</li>
<li> Memory optimization in HyBR.</li></ul></li></ul>
<ul><li> 1.5:	March 10, 2008
<ul><li> Fixed bug causing improper refreshing of combo boxes holding the list of open images.</li>
<li> From now on Deconvolve and Cancel buttons are disabled while deconvolution is in progress.</li>
<li> From now on the main GUI window cannot be closed by using the button from the title bar.   </li></ul></li></ul>
<ul><li> 1.6:	April 18, 2008
<ul><li> The plugin is updated to use Parallel Colt 0.4.</li></ul></li></ul>
<ul><li> 1.7:	August 26, 2008
<ul><li> New method: Nonnegatively Constrained Gauss-Seidel.</li>
<li> Added support for macros.</li>
<li> Optimization in MRNSD.</li>
<li> Added javadoc distribution.</li>
<li> Bzip2 is used to compress tar archives.</li>
<li> The plugin is updated to use Parallel Colt 0.5.</li></ul></li></ul>
<ul><li> 1.8:	November 21, 2008	
<ul><li> Added resizing option (no need to pad the image to the next power-of-two size).</li>
<li> Added output option (a deblurred image is automatically converted to the chosen type).</li>
<li> NNGS has been renamed to WPL - Wiener Filter Preconditioned Landweber.		</li>
<li> The plugin is updated to use Parallel Colt 0.6.</li></ul></li></ul>
<ul><li> 1.9:	April 11, 2009
<ul><li> Added IterativeDeconvolver interface and abstract classes for 2D and 3D iterative algorithms.	</li>
<li> Non-preconditioned and preconditioned algorithms have been merged.</li>
<li> Fixed bug causing NullPointerExceptinon when a blurred image or a PSF was renamed.</li>
<li> Refactoring and cosmetic changes.		</li>
<li> The plugin is updated to use Parallel Colt 0.7.2.</li></ul></li></ul>

<!-- 
NewPP limit report
Cached time: 20200713073111
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.060 seconds
Real time usage: 0.065 seconds
Preprocessor visited node count: 421/1000000
Preprocessor generated node count: 1321/1000000
Postâ€expand include size: 3803/2097152 bytes
Template argument size: 1486/2097152 bytes
Highest expansion depth: 6/40
Expensive parser function count: 0/3
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%   12.816      1 - -total
 64.95%    8.324      4 - Template:Bc
 30.91%    3.962      1 - Template:Infobox
 21.47%    2.752      8 - Template:Arrow
-->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="index.php?title=Parallel_Iterative_Deconvolution&amp;oldid=17032">http://imagej.net/index.php?title=Parallel_Iterative_Deconvolution&amp;oldid=17032</a>"</div>
							</div>

			<div id="footer">
				<p> This page was last modified on 22 September 2015, at 16:25.</p><ul><li><a href="ImageJ:Privacy_policy" title="ImageJ:Privacy policy">Privacy policy</a></li><li><a href="ImageJ:About" class="mw-redirect" title="ImageJ:About">About ImageJ</a></li><li><a href="Imprint" title="Imprint">Imprint</a></li><li><a href="index.php?title=Parallel_Iterative_Deconvolution&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li></ul>			</div>

			<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="Category:Plugins" title="Category:Plugins">Plugins</a></li><li><a href="Category:Deconvolution" title="Category:Deconvolution">Deconvolution</a></li></ul></div></div>		</div>

		<div id="bottom-wrap">
		<div id="footer-wrap-inner">

		<div id="primary" class="footer">
			<ul>

			<li id="search" class="widget">
				<h3>Search</h3>
				<form action="http://imagej.net/index.php" id="searchform">
					<input type='hidden' name="title" value="Special:Search" />
					<div>
						<input name="search" placeholder="Search ImageJ" title="Search ImageJ [f]" accesskey="f" id="s"/>						<input type="submit" name="go" value="Search" title="Go to a page with this exact name if it exists" class="searchButton" id="searchsubmit"/>					</div>
				</form>
			</li>

			
						<li class="widget">
				<h3>Personal tools</h3>
				<div>
					<ul>
					<li id="pt-createaccount"><a href="index.php?title=Special:CreateAccount&amp;returnto=Parallel+Iterative+Deconvolution" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li><li id="pt-login"><a href="index.php?title=Special:UserLogin&amp;returnto=Parallel+Iterative+Deconvolution" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>					</ul>
				</div>
			</li>
			
			<li class="widget">
							</li>

			</ul>
		</div>

		<div id="secondary" class="footer">
			<ul>

			<li id="toolbox" class="widget">
				<h3>Tools</h3>
				<ul>
				<li id="t-whatlinkshere"><a href="Special:WhatLinksHere/Parallel_Iterative_Deconvolution" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="Special:RecentChangesLinked/Parallel_Iterative_Deconvolution" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="index.php?title=Parallel_Iterative_Deconvolution&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="index.php?title=Parallel_Iterative_Deconvolution&amp;oldid=17032" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="index.php?title=Parallel_Iterative_Deconvolution&amp;action=info" title="More information about this page">Page information</a></li>				</ul>
			</li>

			
			<li class="widget">
							</li>

			</ul>
		</div>

		<div id="ternary" class="footer">
			<ul>

			<li class="widget">
				<img id="logo" src="skins/imagej-128.png" alt=""/>			</li>

			<li class="widget">
				<h3><span class="mw-headline" id="MORE_TOOLS">MORE TOOLS</span></h3>
<ul><li> <a href="Special:ChangeUploadPassword" title="Special:ChangeUploadPassword">Set/change upload password</a></li>
<li> <a href="Special:RecentChanges" title="Special:RecentChanges">Recent changes</a></li>
<li> <a href="Special:LonelyPages" title="Special:LonelyPages">Orphaned pages</a></li></ul>
			</li>

			</ul>
		</div>
		<div style="clear: both"></div>

		</div>
		</div>

		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.load(["ext.fancytree","ext.suckerfish","mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.SimpleTooltip"]);});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":215});});</script>
		</body>
		</html>
		