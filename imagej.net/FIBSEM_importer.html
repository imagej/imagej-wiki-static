<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>FIBSEM importer - ImageJ</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"FIBSEM_importer","wgTitle":"FIBSEM importer","wgCurRevisionId":17103,"wgRevisionId":17103,"wgArticleId":1500,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Import-Export"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"FIBSEM_importer","wgRelevantArticleId":1500,"wgRequestId":"dc65e366f94d2747e489232c","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgPreferredVariant":"en","fancytree_path":"/extensions/TreeAndMenu/fancytree"});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user.cssprefs":"ready","user":"ready","user.options":"loading","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","skins.erudite":"ready"});mw.loader.implement("user.options@0j3lz3q",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens@1ku9xth",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup"]);});</script>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%252Cshared%257Cmediawiki.sectionAnchor%257Cskins.erudite&amp;only=styles&amp;skin=erudite.css"/>
<script async="" src="load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=erudite"></script>
<link rel="stylesheet" href="extensions/TreeAndMenu/fancytree/fancytree.css"/><link rel="stylesheet" href="extensions/TreeAndMenu/suckerfish/suckerfish.css"/>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=erudite.css"/>
<meta name="generator" content="MediaWiki 1.28.0"/>
<meta name="description" content="The FIBSEM importer is able to read the image files produced by the FIB-SEM machine at Janelia Farm. It can be used via:"/>
<link rel="shortcut icon" href="skins/ij2.ico"/>

<script type="text/javascript" src="extensions/SyntaxHighlighter/syntaxhighlighter/scripts/shCore.js"></script>
<script type="text/javascript" src="extensions/SyntaxHighlighter/syntaxhighlighter/scripts/shBrushJava.js"></script>
<script type="text/javascript">
SyntaxHighlighter.all();
</script>
<link rel="stylesheet" type="text/css" media="screen" href="extensions/SyntaxHighlighter/syntaxhighlighter/styles/shCoreMinit.css" />

	<meta property="og:type" content="article"/>

	<meta property="og:site_name" content="ImageJ"/>

	<meta property="og:title" content="FIBSEM importer"/>

	<meta property="og:description" content="The FIBSEM importer is able to read the image files produced by the FIB-SEM machine at Janelia Farm. It can be used via:"/>


<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-FIBSEM_importer rootpage-FIBSEM_importer skin-erudite action-view">
		<div class="mw-jump">
			<a href="FIBSEM_importer.html#bodyContent">Skip to content</a>, 			<a href="FIBSEM_importer.html#search">Skip to search</a>
		</div>

		<div id="top-wrap" role="banner">
			<h1><a href="Welcome" title="ImageJ" rel="home">ImageJ</a></h1>
			<div id="tagline">From ImageJ</div>

			<a id="menubutton" href="FIBSEM_importer.html#menu">Menu</a>
			<div id="nav" role="navigation">
			<ul id='menu'>
<li id="menu-item-n-About"><a href="ImageJ">About</a></li>
<li id="menu-item-n-Downloads"><a href="Downloads">Downloads</a></li>
<li id="menu-item-n-Learn"><a href="Learn">Learn</a></li>
<li id="menu-item-n-Develop"><a href="Development">Develop</a></li>
<li id="menu-item-n-News"><a href="News">News</a></li>
<li id="menu-item-n-Events"><a href="Events">Events</a></li>
<li id="menu-item-n-Help"><a href="Help">Help</a></li>
</ul>
			</div>
		</div>

		<div id="mw-js-message"></div>
		
		<div id="main" role="main">

			<div id="bodyContent">
				<h1>FIBSEM importer</h1>
				
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><table class="infobox" cellspacing="5" style="max-width: 31em; font-size: 90%; text-align: left; float: right; border: 1px solid #a0a0a0;">
<tr>
<th colspan="2" style="text-align: center; font-size: 130%;"> <div style="float: left"></div>FIBSEM importer (ImageJ)<div style="clear: left;"></div>
</th></tr>
<tr>
<th> Author
</th>
<td> Stephan Preibisch
</td></tr>




<tr>
<th> Maintainer
</th>
<td> Stephan Preibisch
</td></tr>


<tr>
<th> Source
</th>
<td> <a rel="nofollow" class="external text" href="https://github.com/fiji/IO/blob/master/src/main/java/io/FIBSEM_Reader.java">on GitHub</a>
</td></tr>
<tr>
<th> Initial release
</th>
<td> 08/02/2012
</td></tr>
<tr>
<th> Latest version
</th>
<td> 08/02/2012
</td></tr>
<tr>
<th> Development status
</th>
<td> stable
</td></tr>
<tr>
<th> Category
</th>
<td> <a href="./Category:Plugins" title="Category:Plugins">Category:Plugins</a>
</td></tr>

</table>
<p><br />
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="FIBSEM_importer.html#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="FIBSEM_importer.html#Special_options"><span class="tocnumber">2</span> <span class="toctext">Special options</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="FIBSEM_importer.html#Open_image_as_float"><span class="tocnumber">2.1</span> <span class="toctext">Open image as float</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="FIBSEM_importer.html#Access_the_complete_metadata"><span class="tocnumber">2.2</span> <span class="toctext">Access the complete metadata</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Overview">Overview</span></h2>
<p>The FIBSEM importer is able to read the image files produced by the FIB-SEM machine at Janelia Farm. It can be used via:
</p>
<ul><li> Drag &amp; Drop</li>
<li> <span><em><span style="border-bottom:1px dotted #ccc;"> File </span>&#160;&#8250; <span style="border-bottom:1px dotted #ccc;"> Import </span>&#160;&#8250; <span style="border-bottom:1px dotted #ccc;"> FIB-SEM ...</span></em></span></li></ul>
<p>It will be opened as unsigned 16-bit data ranging from 0 to 65535, where 0 corresponds to a detector voltage of -10 volts and 65535 to a voltage of +10 volts. It will automatically set the pixel resolution in the image calibration.
</p><p>For access to all the other meta-data, see the special options paragraph below.
</p>
<h2><span class="mw-headline" id="Special_options">Special options</span></h2>
<h3><span class="mw-headline" id="Open_image_as_float">Open image as float</span></h3>
<p>It might make sense to open the image as float and not convert it into an unsigned short. To do so, one can set a switch in the FIBSEM importer using the <b>script editor</b>:
</p>
<ul><li> <span><em><span style="border-bottom:1px dotted #ccc;"> File </span>&#160;&#8250; <span style="border-bottom:1px dotted #ccc;"> New </span>&#160;&#8250; <span style="border-bottom:1px dotted #ccc;"> Script</span></em></span></li>
<li> <span><em><span style="border-bottom:1px dotted #ccc;"> Language </span>&#160;&#8250; <span style="border-bottom:1px dotted #ccc;"> Beanshell</span></em></span></li>
<li> type the following lines</li></ul>
<pre class="brush:java">
import io.FIBSEM_Reader;
FIBSEM_Reader.openAsFloat = true;
</pre>
<ul><li> click Run</li></ul>
<p>From now on, every FIBSEM image of the <b>currently running Fiji instance</b> will be opened as float, the float values represent directly the measured voltage for each pixel.
</p>
<h3><span class="mw-headline" id="Access_the_complete_metadata">Access the complete metadata</span></h3>
<p>In order to access the complete metadata you have to make a new instance of the FIBSEM importer, load the dataset and afterwards request the metadata object. Here is the code how do it using the script editor and the Beanshell language (see above):
</p>
<pre class="brush:java">
import io.FIBSEM_Reader;
import io.FIBSEM_Reader.FIBSEMData;

// open the file
FIBSEM_Reader reader = new FIBSEM_Reader();
reader.run( "/Users/preibischs/Desktop/Zeiss_12-01-14_210123.dat" );

// get the metadata
FIBSEMData metadata = reader.getHeader();

// print all data into the log window
IJ.log( "" + metadata );

// print a single field
IJ.log( "The resolution of the image is " + metadata.xRes + " x " + metadata.yRes + " pixels." );</pre>
<p>Below you will find a complete list of all fields of <b>FIBSEMData</b>, i.e. all metadata information that you can access:
</p>
<pre class="brush:java">
/* the magic number identifying the file, should be 3555587570 */
public long magicNumber;
/* the version of the file, supported until now is 1,2,3 */
public int fileVersion;
/* file type, 1 is Zeiss Neon detectors */
public int fileType;
/* AI sampling time (including oversampling) in seconds */
public double timeStep;
/* the number of channels */
public int numChannels;
/* the parameters required to transform the 16 bit signed signal back to volts:
 * volts = offset + intensity*gain
 * (we ignore second and third order as they are zero anyways)
 */
public float[] offset, gain, secondOrder, thirdOrder;
/* number of pixels in x per channel */
public long xRes;
/* number of pixels in y per channel */
public long yRes;
/* AI oversampling */
public int oversampling;
/* Read AI delay (# of samples) - only v3*/
public int AIdelay = 0;
/* Scan speed (Zeiss #) */
public int zeissScanSpeed;

/* Actual AO (scanning) rate */
public double scanRate;
/* Frameline rampdown ratio */
public double framelineRampdownRatio;
/* X coil minimum voltage */
public double xMin;
/* X coil maximum voltage */
public double xMax;
/* Detector minimum voltage */
public double detMin;
/* Detector maximum voltage */
public double detMax;

/* AI Ch1 */
public int AI1;
/* AI Ch2 */
public int AI2;
/* AI Ch3 */
public int AI3;
/* AI Ch4 */
public int AI4;

/* notes */
public String notes;

/* Name of detector A */
public String detectorA = "";
/* Name of detector B */
public String detectorB = "";
/* Name of detector C */
public String detectorC = "";
/* Name of detector D */
public String detectorD = "";

/* Magnification */
public double magnification;
/* Pixel size in nm */
public double pixelSize;
/* Working distance in mm */
public double wd;
/* EHT in kV */
public double eht;
/* SEM aperture number */
public int semApr;
/* high current mode (1=on, 0=off) */
public int highCurrent;
/* FIB mode: 0=SEM, 1=FIB, 2=Milling, 3=SEM+FIB, 4=Mill+SEM, 5=SEM Drift Correction, 6=FIB Drift Correction, 7=No Beam, 8=External, 9=External+SEM */
public int mode;

/* SEM probe current in A */
public double semCurr;
/* SEM scan roation in degree */
public double semRot;
/* Chamber Vacuum */
public double chamVac;
/* Gun vacuum */
public double gunVac;
/* SEM beam shift X */
public double semShiftX;
/* SEM beam shift Y */
public double semShiftY;
/* SEM stigmation X */
public double semStiX;
/* SEM stigmation Y */
public double semStiY;
/* SEM aperture alignment X */
public double semAlnX;
/* SEM aperture alignment Y */
public double semAlnY;
/* Stage position X in mm */
public double stageX;
/* Stage position Y in mm */
public double stageY;
/* Stage position Z in mm */
public double stageZ;
/* Stage position T in degree */
public double stageT;
/* Stage position R in degree */
public double stageR;
/* Stage position M in mm */
public double stageM;
/* Detector A brightness (%) */
public double brightnessA;
/* Detector A contrast (%) */
public double contrastA;
/* Detector B brightness (%) */
public double brightnessB;
/* Detector B contrast (%) */
public double contrastB;
/* FIB focus in kV */
public double fibFocus;
/* FIB probe number */
public int fibProb;
/* FIB emission current */
public double fibCurr;
/* FIB scan rotation */
public double fibRot;
/* FIB aperture alignment X */
public double fibAlnX;
/* FIB aperture alignment Y */
public double fibAlnY;
/* FIB stigmation X */
public double fibStiX;
/* FIB stigmation Y */
public double fibStiY;
/* FIB beam shift X in micron */
public double fibShiftX;
/* FIB beam shift Y in micron */
public double fibShiftY;

/* name of the machine */
public String machineID;
/* file length in bytes */
public long fileLength;
</pre>

<!-- 
NewPP limit report
Cached time: 20200713065059
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.032 seconds
Real time usage: 0.030 seconds
Preprocessor visited node count: 310/1000000
Preprocessor generated node count: 1569/1000000
Postâ€expand include size: 2391/2097152 bytes
Template argument size: 592/2097152 bytes
Highest expansion depth: 6/40
Expensive parser function count: 0/3
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%   17.345      1 - -total
 52.07%    9.031      3 - Template:Bc
 45.44%    7.881      1 - Template:Infobox
 16.79%    2.913      5 - Template:Arrow
 11.78%    2.043      1 - Template:GitHub
-->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="index.php?title=FIBSEM_importer&amp;oldid=17103">http://imagej.net/index.php?title=FIBSEM_importer&amp;oldid=17103</a>"</div>
							</div>

			<div id="footer">
				<p> This page was last modified on 22 September 2015, at 21:52.</p><ul><li><a href="./ImageJ:Privacy_policy" title="ImageJ:Privacy policy">Privacy policy</a></li><li><a href="./ImageJ:About" class="mw-redirect" title="ImageJ:About">About ImageJ</a></li><li><a href="Imprint" title="Imprint">Imprint</a></li></ul>			</div>

			<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="./Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="./Category:Import-Export" title="Category:Import-Export">Import-Export</a></li></ul></div></div>		</div>

		<div id="bottom-wrap">
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.load(["ext.fancytree","ext.suckerfish","mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.SimpleTooltip"]);});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":260});});</script>
		</body>
		</html>
		